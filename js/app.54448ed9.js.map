{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?c650","webpack:///./src/App.vue?a285","webpack:///./src/components/OptionsEditor.vue?9c63","webpack:///./src/domain/models/options.ts","webpack:///./src/components/OptionsEditor.vue","webpack:///./src/components/OptionsEditor.vue?3cdb","webpack:///./src/components/OptionsEditor.vue?ae06","webpack:///./src/domain/util/util.ts","webpack:///./src/domain/models/notes.ts","webpack:///./src/domain/services/midiBatcher.ts","webpack:///./src/domain/services/colorGiver.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","options","canvas","width","height","model","callback","$$v","expression","staticRenderFns","on","onJsonChange","defaultOptions","display","waitBeforeClearMilliseconds","tickMilliseconds","circle","tonic","degreeOffset","viewMode","single","overtoneGrid","randomPixelation","concentricPixelation","mix","rootBias","melodyBias","render","middleBias","emergentBias","emergentBiasFloor","overtone","numberOvertones","backoffCoefficient","newValue","emit","components","VContainer","VRow","VCol","VSelect","VCheckbox","VTextField","VBtn","vueJsonEditor","component","mapcat","items","f","forEach","deepMap","map","is","flipMap","arr","midiToScientific","midi","octave","kind","class","noteDropdownOptions","num","letter","toString","NoteToMidi","note","toMidi","offsetFromRoot","solfege","octaveOffset","_notes","Map","_sustainOn","newNotes","k","sustained","set","velocity","MidiBatcher","lifespan","undefined","delete","notes","Array","from","values","sort","a","b","ms","hslToRgb","hsl","g","h","hue","light","saturation","hue2rgb","q","red","Math","round","green","blue","hslToHex","min","color","max","padStart","fifths","notesToColors","config","pn","abs","hslToVector","x","cos","PI","y","sin","z","vectorToHsl","v","atan2","sqrt","mixColors","biases","colors","middleCount","totalDivider","weight","cv","colorOvertones","make","lighten","semitones","counter","addOvertone","thisWeight","normalizeWeights","weightedColors","totalWeight","wc","reduce","midiBatcher","ctx","innerWidth","innerHeight","addEventListener","resize","removeEventListener","dimensions","rows","rowSize","colorsInRow","cols","colSize","thisColor","beginPath","fillStyle","rect","fill","Uint8ClampedArray","imageData","ImageData","rgbs","performance","now","floor","random","putImageData","totalElements","emergent","multiplier","end","begin","midpoint","useEmergence","randomPixelator","document","getElementById","getContext","noNotesForMs","tryClear","clearRect","renderSingleColor","getNotes","tick","renderOvertonesGrid","withOvertones","hexOvertones","drawAll","pixelateRandomly","rawColors","cs","flatColors","flat","drawingPool","rgb","pixelateConcentrically","wcs","emergentDrawingPool","concentricPixelator","go","runLoop","setTimeout","enable","ex","console","log","inputs","outputs","input","addListener","e","endSustain","beginSustain","handleNoteOn","number","handleNoteOff","_","makeRandomPixelator","makeConcentricPixelator","OptionsEditor","VApp","VMain","VTabs","VTab","VTabItem","vuetify","use","productionTip","$mount"],"mappings":"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","file":"js/app.54448ed9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{staticClass:\"ma-0 pa-0\",attrs:{\"width\":_vm.options.canvas.width,\"height\":_vm.options.canvas.height}},[_c('v-main',[_c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"lg-6\"},[_c('options-editor',{model:{value:(_vm.options),callback:function ($$v) {_vm.options=$$v},expression:\"options\"}})],1)],1)],1)],1),_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":_vm.options.canvas.width,\"height\":_vm.options.canvas.height}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vue-json-editor',{attrs:{\"expandedOnStart\":true},on:{\"json-change\":_vm.onJsonChange},model:{value:(_vm.options),callback:function ($$v) {_vm.options=$$v},expression:\"options\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Note, PitchClass, ScientificNote, scientificNote } from \"./notes\";\n\nexport type ViewMode = { single: boolean; overtoneGrid: boolean; randomPixelation: boolean; concentricPixelation: boolean; }\n\nexport type DisplayConfig = { tickMilliseconds: number; waitBeforeClearMilliseconds: number; }\nexport type CircleConfig = { tonic: PitchClass; degreeOffset: number }\nexport type MixBias = { rootBias: number; melodyBias: number; }\nexport type RenderBias = { rootBias: number; middleBias: number; melodyBias: number; emergentBias: number; emergentBiasFloor: number; }\nexport type OvertoneConfig = { numberOvertones: number; backoffCoefficient: number; }\n\nexport type CanvasOptions = { width: number; height: number; }\n\nexport type Options = {\n    display: DisplayConfig;\n    circle: CircleConfig;\n    viewMode: ViewMode;\n    canvas: CanvasOptions;\n    mix: MixBias;\n    render: RenderBias;\n    overtone: OvertoneConfig;\n}\n\n\n// 60 20 20 | 50 \n// would mean 50% new cards that haven't been tested yet, until that runs out\n// then when a previously tested card is pulled, there is a :\n// 60% chance it's a card that is in the bottom third of your performance\n// 20% for 33-66th percentile\n// 20% for 67-100th percentile \nexport type Priorities = {\n    percentNew: number;\n    byPercentiles: number[];\n}\n\nexport const defaultOptions: Options = {\n    display: { waitBeforeClearMilliseconds: 100, tickMilliseconds: 5},\n    circle: { tonic: \"C\", degreeOffset: 60 },\n    viewMode: { single: false, overtoneGrid: false, randomPixelation: false, concentricPixelation: true },\n    canvas: { width: 1800, height: 1190 },\n    mix: { rootBias: 1.5, melodyBias: 1.5 },\n    render: { rootBias: 1, middleBias: 1, melodyBias: 1, emergentBias: 1 , emergentBiasFloor: 0.2},\n    overtone: { numberOvertones: 7, backoffCoefficient: 1.5 }\n};","\n\n\n\n\n\n\nimport { Component, Watch, Emit, Prop, Vue } from \"vue-property-decorator\";\nimport { VBtn, VContainer, VRow, VCol, VSelect,VCheckbox, VTextField } from \"vuetify/lib\";\nimport { defaultOptions, Options } from \"../domain/models/options\";\nimport { Note, Octave, PitchClass } from \"../domain/models/notes\";\nimport vueJsonEditor from \"vue-json-editor\";\n\n@Component ({\n  components: {\n      VContainer, VRow, VCol,\n      VSelect, VCheckbox, VTextField,\n      VBtn, vueJsonEditor\n  }\n})\nexport default class OptionsEditor extends Vue {\n\n    private options: Options = { ... defaultOptions  };\n\n    onJsonChange(newValue: Options) {\n        this.options = newValue;\n        this.emit();\n    }\n\n    @Emit('input')\n    emit(): Options {\n        return this.options;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OptionsEditor.vue?vue&type=template&id=1f28639e&\"\nimport script from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// This is flatmap, but JSRepl complains about flatmap, so I have to write my own.\n export function mapcat<A, B>(items: A[], f: (a: A) => B[]): B[] {\n    const result: B[] = [];\n    items.forEach(i => {\n        f(i).forEach(j => result.push(j));\n    });\n    return result;\n}\n\nexport function deepMap<A, B>(items: A[][], f: (a: A) => B)\n{\n    return items.map(is => is.map(f));\n}\n\nexport function flipMap<A, B>(items: A[][], f: (a: A[]) => B): B[]\n{\n    const result: B[] = [];\n    for (let i = 0; i < items[0].length; i++)\n        result.push(f(items.map(arr => arr[i])));\n    return result;\n}\n\nexport function randomNumberBetweenInclusive(low: number, high: number) {\n    return Math.floor(Math.random() * (high - low + 1) + low);\n}\n\nexport function drawRandom<T>(items: T[]): T {\n    return items[randomNumberBetweenInclusive(0, items.length - 1)];\n}\n\nexport type RandomSampleRepeatOptions = \"no-repeats\" | \"non-sequential-repeats\" | \"allow-repeats\"\nexport function drawRandomSample<T>(items: T[], size: number, repeatOptions: RandomSampleRepeatOptions): T[] {\n    const result: T[] = [];\n\n    if (repeatOptions == \"allow-repeats\") {\n        for (let i = 0; i < size; i++) {\n            result.push(drawRandom(items));\n        }\n    } else if (repeatOptions == \"no-repeats\") {\n        if (size > items.length) {\n            throw new Error(\"can't randomly sample \" + size.toString() + \" items with no repeats from a list with \" + items.length.toString() + \" elements.\");\n        }\n\n        const picked = new Set<number>();\n        let i = randomNumberBetweenInclusive(0, items.length - 1);\n\n        while (result.length < size) {\n            while (picked.has(i)) {\n                i = randomNumberBetweenInclusive(0, items.length - 1);\n            }\n            result.push(items[i]);\n            picked.add(i);\n        }\n    } else if (repeatOptions == \"non-sequential-repeats\") {\n        let lastPick = randomNumberBetweenInclusive(0, items.length - 1);\n        let nextPick = lastPick;\n        while (result.length < size) {\n            while (lastPick == nextPick) {\n                nextPick = randomNumberBetweenInclusive(0, items.length - 1);\n            }\n            result.push(items[nextPick]);\n            lastPick = nextPick;\n        }\n    }\n\n    return result;\n}\n\n// https://stackoverflow.com/a/12646864\nexport function shuffleArray<T>(array: T[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\n\nexport function doTimes<T>(f: () => T, count: number): T[] {\n    const result: T[] = [];\n    for (let i = 0; i < count; i++) {\n        result.push(f());\n    }\n    return result;\n}\n\nexport function indexBy<K, V>(items: V[], f: (v: V) => K): Map<K, V> {\n    const result = new Map<K, V>();\n    items.forEach(x => result.set(f(x), x));\n    return result;\n}","import { Frequency, Midi,  } from \"tone\";\nimport { mapcat } from \"../util/util\";\n\nexport type PitchClass = \"A\" | \"Bb\" | \"B\" | \"C\" | \"Db\" | \"D\" | \"Eb\" | \"E\" | \"F\" | \"F#\" | \"G\" | \"Ab\";\nexport type Octave =  0 | 1 | 2 | 3 | 4 | 5 | 6  | 7 |  8 ;\n\n\nexport type MidiNote = number;\nexport type ScientificNote = {kind: \"scientific\", class: PitchClass, octave: Octave}\n\nexport type SolfegeClass = \"do\" \n    | \"ra\" | \"re\" | \"ri\" \n    | \"me\" | \"mi\"\n    | \"fa\" | \"fi\"\n    | \"se\" | \"so\" | \"si\" \n    | \"le\" | \"la\" | \"li\"\n    | \"te\" | \"ti\"\n\nexport type OctaveSolfegeRelative = {octaveOffset: number, solfege: SolfegeClass};\n\nexport type Note =  \n    {kind: \"solfege\", solfege: OctaveSolfegeRelative, tonic: Note}\n    | {kind: \"midi\", midi: number} \n    | ScientificNote;\n\nexport function solfegeNote(solfege: OctaveSolfegeRelative, tonic: Note): Note {\n    return {kind: \"solfege\", solfege: solfege, tonic: tonic};\n}\n\nexport function scientificNote(pitchClass: PitchClass, octave: Octave): Note {\n    return {kind: \"scientific\", class: pitchClass, octave: octave};\n}\n\nexport function midiToScientific(midi: number, octave: number): ScientificNote {\n    const c: PitchClass = midi % 12 == 9 ? \"A\"\n        : midi % 12 == 10 ? \"Bb\"\n        : midi % 12 == 11 ? \"B\"\n        : midi % 12 == 0 ? \"C\"\n        : midi % 12 == 1 ? \"Db\"\n        : midi % 12 == 2 ? \"D\"\n        : midi % 12 == 3 ? \"Eb\"\n        : midi % 12 == 4 ? \"E\"\n        : midi % 12 == 5 ? \"F\"\n        : midi % 12 == 6 ? \"F#\"\n        : midi % 12 == 7 ? \"G\"\n        : \"Ab\";\n\n    return { kind: \"scientific\", class: c, octave: octave as Octave }\n}\n\nexport function midiNote(midi: number): Note {\n    return {kind: \"midi\", midi: midi};\n}\n\nexport type MusicalPhrase = Note[][];\n\nexport const noteDropdownOptions = ['A', 'Bb', 'B', 'C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab'];\n\nexport const numberedNoteDropdownOptions: string[] = mapcat(\n    [1, 2, 3, 4, 5, 6, 7, 8],\n    num => noteDropdownOptions.map(letter => letter + num.toString())\n);\n\nexport function NoteToMidi(note: Note): MidiNote {\n    return note.kind == \"midi\" ? note.midi\n        : note.kind == \"scientific\" ? Frequency(note.class + note.octave.toString()).toMidi()\n        : offsetFromRoot(note.solfege.solfege) + 12 * note.solfege.octaveOffset + NoteToMidi(note.tonic);\n}\n\nexport function noteToHumanReadable(note: Note): string {\n    return Frequency(NoteToMidi(note), \"midi\").toNote();\n}\n\nexport type NoteComparison = \"greater\" | \"equal\" | \"lesser\"\nexport function compareNotes(n: Note, m: Note): NoteComparison {\n    const x = NoteToMidi(n); const y = NoteToMidi(m);\n    return x < y ? \"lesser\" : x > y ? \"greater\" : \"equal\";\n}\n\nexport function offsetFromRoot(solfege: SolfegeClass): number {\n    return solfege == \"do\" ? 0\n        : solfege == \"ra\" ? 1\n        : solfege == \"re\" ? 2\n        : solfege == \"ri\" ? 3\n        : solfege == \"me\" ? 3\n        : solfege == \"mi\" ? 4\n        : solfege == \"fa\" ? 5\n        : solfege == \"fi\" ? 6\n        : solfege == \"se\" ? 6\n        : solfege == \"so\" ? 7\n        : solfege == \"si\" ? 8\n        : solfege == \"le\" ? 8\n        : solfege == \"la\" ? 9\n        : solfege == \"li\" ? 10\n        : solfege == \"te\" ? 10\n        : solfege == \"ti\" ? 11\n        : -1; \n}\n\nexport function toSolfege(solfege: string): SolfegeClass {\n    if (offsetFromRoot(solfege as SolfegeClass) == -1) {\n        console.log(\"Not valid solfege: \" + solfege);\n        throw new Error(\"Invalid solfege: \" + solfege);\n    } else {\n        return solfege as SolfegeClass;\n    }\n}\n\n// just for ascending chords\nexport function toOctaveSolfege(solfege: SolfegeClass[]): OctaveSolfegeRelative[] {\n    let maxOffsetSoFar = -1;\n    let octave = 0;\n    const result: OctaveSolfegeRelative[] = [];\n\n    solfege.forEach(note => {\n        const baseOffset = offsetFromRoot(note) ?? 0;\n        while (baseOffset + octave * 12 <= maxOffsetSoFar) {\n            octave++;\n        }\n        const withOctave = baseOffset + 12 * octave;\n        maxOffsetSoFar = withOctave;\n        result.push({solfege: note, octaveOffset: octave});\n    });\n    return result;\n}","import { MidiNote, Note, NoteToMidi, ScientificNote } from \"../models/notes\";\n\nexport type PlayedNote = {\n    velocity: number;\n    note: ScientificNote;\n    lifespan: number;\n    sustained: boolean;\n}\n\nexport class MidiBatcher {\n    private _notes: Map<string, PlayedNote> = new Map<string, PlayedNote>();;\n    private _sustainOn = false;\n\n    constructor() { }\n\n    endSustain()\n    {\n        this._sustainOn = false;\n        const newNotes = new Map<string, PlayedNote>();\n        this._notes.forEach((n, k) => {\n            if (!n.sustained)\n                newNotes.set(k, n);\n        });\n        this._notes = newNotes;\n    }\n\n    beginSustain()\n    {\n        this._sustainOn = true;\n    }\n\n    private static key(note: ScientificNote): string\n    {\n        return note.class + note.octave;\n    }\n\n    handleNoteOn(note: ScientificNote, velocity: number): void\n    {\n        this._notes.set(MidiBatcher.key(note), {velocity: velocity, note: note, lifespan: 0, sustained: false});\n    }\n\n    handleNoteOff(note: ScientificNote): void\n    {\n        if (this._sustainOn)\n        {\n            const n = this._notes.get(MidiBatcher.key(note));\n            if (n != undefined)\n                n.sustained = true;\n        }\n        else\n        {\n            this._notes.delete(MidiBatcher.key(note));\n        }\n    }\n\n    getNotes(): PlayedNote[]\n    {\n        const notes = Array.from(this._notes.values());\n        notes.sort((a, b) => NoteToMidi(a.note) - NoteToMidi(b.note));\n        return notes;\n    }\n\n    tick(ms: number): void\n    {\n        this._notes.forEach(n => n.lifespan = n.lifespan + ms);\n    }\n}","import { PitchClass, NoteToMidi, midiNote } from \"../models/notes\";\nimport { MixBias, OvertoneConfig, CircleConfig } from \"../models/options\";\nimport { PlayedNote } from \"./midiBatcher\";\n\nexport type WeightedHSL = {\n    weight: number; // between [0, 1], in a list of  WeightedHSL, they sum to 1.\n    color: HSL;\n}\n\nexport type HSL = {\n    hue: number; // [0, 360], int\n    saturation: number; // [0, 100], float\n    light: number; // [0, 100], float\n}\n\nexport type RGB = {\n    red: number;\n    green: number;\n    blue: number;\n}\n\nexport type HexColor = string;\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   {number}  h       The hue\n * @param   {number}  s       The saturation\n * @param   {number}  l       The lightness\n * @return  {Array}           The RGB representation\n * \n * https://stackoverflow.com/a/9493060\n */\nexport function hslToRgb(hsl: HSL): RGB {\n    const h = hsl.hue / 360.0;\n    const l = hsl.light / 100.0;\n    const s = hsl.saturation / 100.0;\n\n    let r, g, b;\n\n    if(s == 0){\n        r = g = b = l; // achromatic\n    }else{\n        const hue2rgb = function hue2rgb(p: number, q: number, t: number){\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return {red: Math.round(r * 255), green: Math.round(g * 255), blue: Math.round(b * 255)};\n}\n\n// https://stackoverflow.com/a/44134328\nexport function hslToHex(hsl: HSL): HexColor {\n  const h = hsl.hue; const l = hsl.light / 100; const s = hsl.saturation;\n  const a = s * Math.min(l, 1 - l) / 100;\n  const f = (n: number) => {\n    const k = (n + h / 30) % 12;\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n    return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\n  };\n  return `#${f(0)}${f(8)}${f(4)}`;\n}\n\nconst fifths: Map<PitchClass, number> = new Map<PitchClass, number>(\n    [\n        [\"C\", 0],\n        [\"G\", 30],  \n        [\"D\", 60],  \n        [\"A\", 90],  \n        [\"E\", 120],  \n        [\"B\", 150],  \n        [\"F#\", 180],  \n        [\"Db\", 210],  \n        [\"Ab\", 240],  \n        [\"Eb\", 270],  \n        [\"Bb\", 300],  \n        [\"F\", 330]\n    ]\n);\n\n// lifespanFactor:  lifespan is ms, this is multiplied by ms to get percentage discount.\n// for -5% every second, do 0.05/1000\nexport function notesToColors(config: CircleConfig, notes: PlayedNote[]): HSL[] {\n    return notes.map(pn =>\n        {\n            // between 0, 100 -- a percentage\n            return {\n                hue: Math.abs((360 - fifths.get(pn.note.class)! + config.degreeOffset + fifths.get(config.tonic)!)) % 360,\n                saturation: 100 * (0.7 + 0.3 * pn.velocity), // todo: configurable saturation floor,\n                light: (NoteToMidi(pn.note) - 21) * (100 / 88.0)\n            };\n        });\n}\n\ntype Vector = {x: number; y: number; z: number}\nfunction hslToVector(hsl: HSL): Vector {\n    // https://stackoverflow.com/a/53328189\n    return {\n        x: Math.cos(hsl.hue / 180 * Math.PI) * hsl.saturation,\n        y: Math.sin(hsl.hue / 180 * Math.PI) * hsl.saturation,\n        z: hsl.light\n    };\n}\n\nfunction vectorToHsl(v: Vector): HSL {\n    const h = Math.atan2(v.y, v.x) * 180 / Math.PI;\n    return {\n        hue: h < 0 ? 360 + h : h,\n        saturation : Math.sqrt(v.x * v.x + v.y * v.y),\n        light: v.z\n    };\n}\n\nexport function mixColors(biases: MixBias, colors: HSL[]): HSL {\n    if (colors.length == 1)\n    {\n        return colors[0];\n    }\n    const middleCount = colors.length - 2;\n    const totalDivider = biases.rootBias + biases.melodyBias + middleCount;\n\n    // todo: also weight by velocity?\n    const v = { x: 0, y: 0, z: 0};\n    for (let i = 0; i < colors.length; i++)\n    {\n        const weight = i == 0 ? biases.rootBias\n            : i == colors.length - 1 ? biases.melodyBias\n            : 1;\n\n        const cv = hslToVector(colors[i]);\n        v.x += cv.x * weight;\n        v.y += cv.y * weight;\n        v.z += cv.z * weight;\n    }\n\n    v.x /= totalDivider;\n    v.y /= totalDivider;\n    v.z /= totalDivider;\n\n    return vectorToHsl(v);\n}\n\nexport function colorOvertones(color: HSL, config: OvertoneConfig): WeightedHSL[] {\n    const make = (h: number, l: number) => ({hue: h, light: l, saturation: color.saturation});\n    const lighten = (semitones: number) => Math.min(100, (100/88) * semitones + color.light);\n\n    let counter = 1;\n\n    const result: WeightedHSL[] = [{ color: color, weight: 1 } ];\n\n    const addOvertone = (c: HSL) => {\n        counter++;\n        const thisWeight = 1 / (config.backoffCoefficient * counter);\n        result.push({color: c, weight: thisWeight});\n    }\n\n    // addition and subtraction are opposites because we need to move counterclockwise\n    // around HSL. So, sharp: subtract; flat: add\n    if (config.numberOvertones >= 1)\n        addOvertone(make(color.hue, lighten(12)));\n    if (config.numberOvertones >= 2)\n        addOvertone(make(color.hue - 31, lighten(19))); // octave and a fifth that's 2cents sharp\n    if (config.numberOvertones >= 3) \n        addOvertone(make(color.hue, lighten(24)));\n    if (config.numberOvertones >= 4)\n        addOvertone(make((color.hue - 120 + 15 * 14/50) %  360, lighten(28))); // major third that's 14 cents flat\n    if (config.numberOvertones >= 5)\n        addOvertone(make(color.hue - 31, lighten(31)));\n    if (config.numberOvertones >= 6)\n        addOvertone(make((color.hue + 60 + 15 * 31/50) % 360, lighten(34))); // minor seventh 31 cents flat\n\n    normalizeWeights(result);\n\n    return result;\n}\n\nexport function normalizeWeights(weightedColors: WeightedHSL[]) {\n    const totalWeight = weightedColors.map(wc => wc.weight).reduce((x, y) => x + y, 0);\n    weightedColors.forEach(wc => wc.weight /= totalWeight);\n}","\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport OptionsEditor from \"./components/OptionsEditor.vue\";\nimport { VBtn, VContainer, VRow, VCol, VTabs, VApp, VMain, VTabItem, VTab } from \"vuetify/lib\";\n\nimport { Options, defaultOptions, CanvasOptions } from './domain/models/options';\nimport { Note, NoteToMidi, scientificNote, Octave, PitchClass, midiToScientific } from \"./domain/models/notes\";\nimport { MidiBatcher } from \"./domain/services/midiBatcher\";\nimport { HSL, RGB, notesToColors, hslToHex, mixColors, HexColor, colorOvertones, hslToRgb, normalizeWeights } from \"./domain/services/colorGiver\";\nimport { indexBy, deepMap, flipMap, drawRandom } from \"./domain/util/util\";\nimport webmidi, { WebMidi } from \"webmidi\";\n\n@Component ({\n  components: {\n    OptionsEditor,\n    VApp, VMain,\n    VTabs, VTab, VTabItem,\n    VContainer, VRow, VCol,\n    VBtn\n  }\n})\nexport default class App extends Vue {\n\n  private options: Options = defaultOptions;\n  private midiBatcher: MidiBatcher = new MidiBatcher();\n  // private randomPixelator: (rgbs: RGB[]) => void = (x) => {}\n  private ctx: (CanvasRenderingContext2D | undefined) = undefined;\n\n  get randomPixelator() {\n    return this.ctx == undefined\n      ? (_: RGB[]) => {} \n      : this.makeRandomPixelator(this.ctx, this.options.canvas);\n  }\n\n  get concentricPixelator() {\n    return this.ctx == undefined\n      ? (rgbs: RGB[][], emergent: RGB[], emergentBias: number, emergentBiasFloor: number) => {}\n      : this.makeConcentricPixelator(this.ctx, this.options.canvas);\n  }\n  // this.randomPixelator = this.makeRandomPixelator(ctx, this.options.canvas);\n\n  // this.concentricPixelator = this.makeConcentricPixelator(ctx, this.options.canvas);\n\n  resize() {\n      this.options.canvas.width = window.innerWidth;\n      this.options.canvas.height = window.innerHeight;\n  }\n\n  created() {\n    window.addEventListener(\"resize\", this.resize);\n  }\n  \n  destroyed() {\n    window.removeEventListener(\"resize\", this.resize);\n  }\n\n  drawAll(ctx: CanvasRenderingContext2D, colors: HexColor[][], dimensions: CanvasOptions)\n  {\n    const height = dimensions.height;\n    const width = dimensions.width;\n\n    const rows = colors.length;\n    const rowSize = height / rows;\n    for (let r = 0; r < rows; r++)\n    {\n      const colorsInRow = colors[r];\n      const cols = colorsInRow.length;\n      const colSize = width / cols;\n\n      for (let c = 0; c < cols; c++)\n      {\n        const thisColor = colorsInRow[c];\n        ctx.beginPath();\n        ctx.fillStyle = thisColor;\n        ctx.rect(c * colSize, r * rowSize, colSize, rowSize);\n        ctx.fill();\n      }\n    }\n  }\n\n  // todo: regenerate instance on size change\n  makeRandomPixelator(ctx: CanvasRenderingContext2D, dimensions: CanvasOptions): ((rgbs: RGB[]) => void)\n  {\n    const width = dimensions.width;\n    const height = dimensions.height;\n\n    const arr = new Uint8ClampedArray(width * height * 4);\n    const imageData = new ImageData(arr, width);\n    return (rgbs: RGB[]) =>\n    {\n      const loopTimeStart = performance.now();\n      for (let i = 0; i < arr.length; i+=4)\n      {\n        const c = rgbs[Math.floor(Math.random()*rgbs.length)];\n        arr[i] = c.red;\n        arr[i + 1] = c.green;\n        arr[i + 2] = c.blue;\n        arr[i + 3] = 255;\n      }\n      const loopTimeEnd = performance.now();\n      // console.log(\"loop time: \" + (loopTimeEnd - loopTimeStart));\n\n      ctx.putImageData(imageData, 0, 0);\n    }\n  }\n\n// todo: resize\n  makeConcentricPixelator(ctx: CanvasRenderingContext2D, dimensions: CanvasOptions)\n  {\n    const width = dimensions.width;\n    const height = dimensions.height;\n\n    const totalElements = width * height * 4;\n    const arr = new Uint8ClampedArray(width * height * 4);\n    const imageData = new ImageData(arr, width);\n    return (rgbs: RGB[][], emergent: RGB[], emergentBias: number, emergentBiasFloor: number) =>\n    {\n      if (rgbs.length == 1)\n      {\n        this.randomPixelator(rgbs[0]);\n        return;\n      }\n      const loopTimeStart = performance.now();\n      let multiplier = totalElements / rgbs.length - 1; multiplier -= (multiplier % 4);\n      const end = multiplier;\n      const begin = 0;\n\n      const midpoint = (end + begin) / 2;\n      const d = (end - begin) / 2;\n\n      for (let i = 0; i < end; i+=4)\n      {\n        const useEmergence = Math.random() - emergentBiasFloor < (Math.abs(i - midpoint) / d) * emergentBias;\n        for (let j = 0; j < rgbs.length; j++)\n        {\n          const c = useEmergence ? \n            emergent[Math.floor(Math.random()*emergent.length)]\n            : rgbs[rgbs.length - j - 1][Math.floor(Math.random()*rgbs[j].length)];\n            arr[j*multiplier + i] = c.red;\n            arr[j*multiplier + i + 1] = c.green;\n            arr[j*multiplier + i + 2] = c.blue;\n            arr[j*multiplier + i + 3] = 255;\n        }\n      }\n\n      const loopTimeEnd = performance.now();\n      // console.log(\"loop time: \" + (loopTimeEnd - loopTimeStart));\n\n      ctx.putImageData(imageData, 0, 0);\n    }\n  }\n\n  mounted()\n  {\n    this.resize();\n      const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n      const ctx = canvas.getContext(\"2d\")!;\n      this.ctx = ctx;\n\n      let noNotesForMs = 0;\n      const tryClear = () => {\n        if (noNotesForMs > this.options.display.waitBeforeClearMilliseconds) {\n          ctx.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n          noNotesForMs = 0;\n        } else {\n          noNotesForMs += this.options.display.tickMilliseconds;\n        }\n      }\n\n      const renderSingleColor = () => {\n          const colors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n          if (colors.length == 0)\n            tryClear();\n          \n          else\n          {\n            const color = mixColors(this.options.mix, colors);\n            ctx.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n            ctx.rect(0, 0, this.options.canvas.width, this.options.canvas.height);\n            ctx.fillStyle = hslToHex(color);\n            ctx.fill();\n          }\n          this.midiBatcher.tick(50);\n      };\n\n      const renderOvertonesGrid = () => {\n        const colors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (colors.length == 0)\n          tryClear();\n\n        else\n        {\n          const withOvertones = colors.map(c => colorOvertones(c, this.options.overtone).map(wc => wc.color));\n          withOvertones.push(flipMap(withOvertones, c => mixColors(this.options.mix, c)));\n          const hexOvertones = deepMap(withOvertones, hslToHex);\n          this.drawAll(ctx, hexOvertones, this.options.canvas);\n        }\n      }\n\n      const pixelateRandomly = () => {\n        const rawColors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (rawColors.length == 0)\n          tryClear();\n        \n        else\n        {\n          // first, weight with overtones, then weight with root/middle/etc. etc.?\n          const cs = [... rawColors];\n          if (cs.length > 1)\n            cs.push(mixColors(this.options.mix, cs));\n          const withOvertones = cs.map(c => colorOvertones(c, this.options.overtone));\n          for (let i = 0; i < withOvertones.length; i++)\n          {\n            if (i == 0)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.rootBias);\n            else if (i == withOvertones.length - 1)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.emergentBias);\n            else if (i == withOvertones.length - 2)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.melodyBias);\n            else \n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.middleBias);\n          }\n          const flatColors = withOvertones.flat();\n          normalizeWeights(flatColors);\n          const drawingPool: RGB[] = [];\n          flatColors.forEach(wc => {\n            const rgb = hslToRgb(wc.color);\n            for (let i = 0; i < Math.floor(10000 * wc.weight); i++)\n              drawingPool.push(rgb);\n          })\n\n          this.randomPixelator(drawingPool);\n        }\n      }\n\n      const pixelateConcentrically = () => {\n        const rawColors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (rawColors.length == 0)\n          tryClear();\n        \n        else\n        {\n          // first, weight with overtones, then weight with root/middle/etc. etc.?\n          const cs = [... rawColors];\n          const withOvertones = cs.map(c => colorOvertones(c, this.options.overtone));\n          const emergent = colorOvertones(mixColors(this.options.mix, cs), this.options.overtone);\n\n          const drawingPool: RGB[][] = [];\n          withOvertones.forEach(wcs => {\n            const result: RGB[] = [];\n            wcs.forEach(wc => {\n              const rgb = hslToRgb(wc.color);\n              // todo: could write reusable function that looked at smallest weight and determined min number needed to have that represented once?\n              for (let i = 0; i < Math.floor(100 * wc.weight); i++)\n                result.push(rgb);\n            });\n            drawingPool.push(result);\n            }\n          );\n\n          const emergentDrawingPool: RGB[] = [];\n          emergent.forEach(wc => {\n            const rgb = hslToRgb(wc.color);\n            for (let i = 0; i < Math.floor(100 * wc.weight); i++)\n              emergentDrawingPool.push(rgb);\n          });\n\n          this.concentricPixelator(drawingPool, emergentDrawingPool, this.options.render.emergentBias, this.options.render.emergentBiasFloor);\n        }\n      }\n\n      const go = () => {\n        this.options.viewMode.single ? renderSingleColor()\n        : this.options.viewMode.overtoneGrid ? renderOvertonesGrid()\n        : this.options.viewMode.randomPixelation ? pixelateRandomly()\n        : pixelateConcentrically();\n      }\n\n      const runLoop = () => {\n        go();\n        setTimeout(runLoop, this.options.display.tickMilliseconds);\n      }\n\n      setTimeout(runLoop, this.options.display.tickMilliseconds);\n\n      webmidi.enable(ex => {\n        if (ex != undefined) {\n          console.log(\"Error trying to setup midi listener: \" + ex.name);\n        } else {\n          console.log(\"Successfully set up midi listner.\")\n        }\n    \n        console.log(webmidi.inputs);\n        console.log(webmidi.outputs);\n    \n        if (webmidi.inputs.length == 0) {\n          console.log(\"No midi input device detected.\");\n        }\n    \n        const input = webmidi.inputs[0];\n        input.addListener(\"midimessage\", \"all\", e =>  { \n          console.log(e);\n          if (e.data[0] >> 4 == 11 && e.data[1] == 64)\n          {\n            if (e.data[2] <= 63)\n              this.midiBatcher.endSustain();\n            else\n              this.midiBatcher.beginSustain();\n          }\n        });\n        input.addListener(\"noteon\", \"all\", e => {\n          this.midiBatcher.handleNoteOn(\n            midiToScientific(e.note.number, e.note.octave),\n            e.velocity\n          );\n          // render();\n        });\n    \n        input.addListener(\"noteoff\", \"all\", e => {\n          this.midiBatcher.handleNoteOff(\n            midiToScientific(e.note.number, e.note.octave)\n          );\n        });\n      }, true);\n  }\n}\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1ac47682&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport Vuetify from \"vuetify/lib\";\n\nimport 'vuetify/dist/vuetify.min.css';\n\nconst vuetify = new Vuetify({});\n\nVue.use(Vuetify);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");"],"sourceRoot":""}