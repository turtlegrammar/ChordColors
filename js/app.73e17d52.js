(function(t){function e(e){for(var i,a,c=e[0],s=e[1],u=e[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);h&&h(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"9c0c":function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticClass:"ma-0 pa-0",attrs:{width:t.options.canvas.width,height:t.options.canvas.height}},[n("v-main",[n("v-container",[n("v-row",[n("v-col",{staticClass:"lg-6"},[n("options-editor",{model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1)],1)],1)],1),n("canvas",{attrs:{id:"canvas",width:t.options.canvas.width,height:t.options.canvas.height}})],1)},r=[],a=(n("cb29"),n("4160"),n("d81d"),n("b0c0"),n("d3b7"),n("8a59"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("2909")),c=n("3835"),s=n("d4ec"),u=n("bee2"),h=n("262e"),l=n("2caf"),f=n("9ab4"),d=n("1b40"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("vue-json-editor",{attrs:{expandedOnStart:!0},on:{"json-change":t.onJsonChange},model:{value:t.options,callback:function(e){t.options=e},expression:"options"}})],1)},v=[],p=n("5530"),m=n("a523"),w=n("0fd9"),b=n("62ad"),y=n("b974"),O=n("ac7c"),M=n("8654"),x=n("8336"),k={display:{waitBeforeClearMilliseconds:100,tickMilliseconds:5},circle:{tonic:"C",degreeOffset:60},color:{lightFloor:5,lightCeiling:95,saturationFloor:80,saturationCeiling:100,standardHSL:!1,okHSL:!0},viewMode:{single:!1,overtoneGrid:!1,wheel:!0,randomPixelation:!1,concentricPixelation:!0},wheelViewModeConfig:{showOvertones:!1,showEmergence:!0,showEmergentOnly:!1,lineWidth:3,spotlightScaleFactor:.05},canvas:{width:1800,height:1190},mix:{rootBias:1.5,melodyBias:1.5,considerVelocity:!0},render:{rootBias:1,middleBias:1,melodyBias:1,emergentBias:1,emergentBiasFloor:.2},decay:{decayPerSecond:0},overtone:{numberOvertones:7,backoffCoefficient:1.5}},C=n("45a3"),j=function(t){Object(h["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.options=Object(p["a"])({},k),t}return Object(u["a"])(n,[{key:"onJsonChange",value:function(t){this.options=t,this.emit()}},{key:"emit",value:function(){return this.options}}]),n}(d["c"]);Object(f["a"])([Object(d["b"])("input")],j.prototype,"emit",null),j=Object(f["a"])([Object(d["a"])({components:{VContainer:m["a"],VRow:w["a"],VCol:b["a"],VSelect:y["a"],VCheckbox:O["a"],VTextField:M["a"],VBtn:x["a"],vueJsonEditor:C["a"]}})],j);var B=j,P=B,E=n("2877"),S=Object(E["a"])(P,g,v,!1,null,null,null),_=S.exports,V=n("7496"),F=n("f6c4"),D=n("fe57"),I=n("71a3"),A=n("c671"),z=(n("a630"),n("4ec9"),n("3ca3"),n("ddb0"),n("25f0"),n("5e54"));n("6062");function N(t,e){var n=[];return t.forEach((function(t){e(t).forEach((function(t){return n.push(t)}))})),n}function L(t,e){return t.map((function(t){return t.map(e)}))}function W(t,e){for(var n=[],i=function(i){n.push(e(t.map((function(t){return t[i]}))))},o=0;o<t[0].length;o++)i(o);return n}function T(t,e){var n=t%12==9?"A":t%12==10?"Bb":t%12==11?"B":t%12==0?"C":t%12==1?"Db":t%12==2?"D":t%12==3?"Eb":t%12==4?"E":t%12==5?"F":t%12==6?"F#":t%12==7?"G":"Ab";return{kind:"scientific",class:n,octave:e}}var q=["A","Bb","B","C","Db","D","Eb","E","F","F#","G","Ab"];N([1,2,3,4,5,6,7,8],(function(t){return q.map((function(e){return e+t.toString()}))}));function G(t){return"midi"==t.kind?t.midi:"scientific"==t.kind?Object(z["a"])(t.class+t.octave.toString()).toMidi():H(t.solfege.solfege)+12*t.solfege.octaveOffset+G(t.tonic)}function H(t){return"do"==t?0:"ra"==t?1:"re"==t?2:"ri"==t||"me"==t?3:"mi"==t?4:"fa"==t?5:"fi"==t||"se"==t?6:"so"==t?7:"si"==t||"le"==t?8:"la"==t?9:"li"==t||"te"==t?10:"ti"==t?11:-1}var J=function(){function t(){Object(s["a"])(this,t),this._notes=new Map,this._sustainOn=!1}return Object(u["a"])(t,[{key:"endSustain",value:function(){this._sustainOn=!1;var t=new Map;this._notes.forEach((function(e,n){e.sustained||t.set(n,e)})),this._notes=t}},{key:"beginSustain",value:function(){this._sustainOn=!0}},{key:"handleNoteOn",value:function(t,e,n){this._notes.set(t,{velocity:n,note:T(t,e),midiNote:t,sustained:!1,timeFirstPresseddMilliseconds:performance.now(),ageMilliseconds:0})}},{key:"handleNoteOff",value:function(t){if(this._sustainOn){var e=this._notes.get(t);void 0!=e&&(e.sustained=!0)}else this._notes.delete(t)}},{key:"getNotes",value:function(){var t=Array.from(this._notes.values());return t.sort((function(t,e){return G(t.note)-G(e.note)})),t}},{key:"tick",value:function(){var t=performance.now();this._notes.forEach((function(e){return e.ageMilliseconds=t-e.timeFirstPresseddMilliseconds}))}}]),t}();n("13d5"),n("3ea3"),n("ac1f"),n("466d");function R(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,.4166666666666667)-.055}function U(t,e,n){var i=t+.3963377774*e+.2158037573*n,o=t-.1055613458*e-.0638541728*n,r=t-.0894841775*e-1.291485548*n,a=i*i*i,c=o*o*o,s=r*r*r;return[4.0767416621*a-3.3077115913*c+.2309699292*s,-1.2684380046*a+2.6097574011*c-.3413193965*s,-.0041960863*a-.7034186147*c+1.707614701*s]}function $(t){var e=.206,n=.03,i=(1+e)/(1+n);return(t*t+e*t)/(i*(t+n))}function K(t,e){var n,i,o,r,a,c,s,u;-1.88170328*t-.80936493*e>1?(n=1.19086277,i=1.76576728,o=.59662641,r=.75515197,a=.56771245,c=4.0767416621,s=-3.3077115913,u=.2309699292):1.81444104*t-1.19445276*e>1?(n=.73956515,i=-.45954404,o=.08285427,r=.1254107,a=.14503204,c=-1.2684380046,s=2.6097574011,u=-.3413193965):(n=1.35733652,i=-.00915799,o=-1.1513021,r=-.50559606,a=.00692167,c=-.0041960863,s=-.7034186147,u=1.707614701);var h=n+i*t+o*e+r*t*t+a*t*e,l=.3963377774*t+.2158037573*e,f=-.1055613458*t-.0638541728*e,d=-.0894841775*t-1.291485548*e,g=1+h*l,v=1+h*f,p=1+h*d,m=g*g*g,w=v*v*v,b=p*p*p,y=3*l*g*g,O=3*f*v*v,M=3*d*p*p,x=6*l*l*g,k=6*f*f*v,C=6*d*d*p,j=c*m+s*w+u*b,B=c*y+s*O+u*M,P=c*x+s*k+u*C;return h-=j*B/(B*B-.5*j*P),h}function Q(t,e){var n=K(t,e),i=U(1,n*t,n*e),o=Math.cbrt(1/Math.max(Math.max(i[0],i[1]),i[2])),r=o*n;return[o,r]}function X(t,e,n,i,o){var r,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(a||(a=Q(t,e)),(n-o)*a[1]-(a[0]-o)*i<=0)r=a[1]*o/(i*a[0]+a[1]*(o-n));else{r=a[1]*(o-1)/(i*(a[0]-1)+a[1]*(o-n));var c=n-o,s=i,u=.3963377774*t+.2158037573*e,h=-.1055613458*t-.0638541728*e,l=-.0894841775*t-1.291485548*e,f=c+s*u,d=c+s*h,g=c+s*l,v=o*(1-r)+r*n,p=r*i,m=v+p*u,w=v+p*h,b=v+p*l,y=m*m*m,O=w*w*w,M=b*b*b,x=3*f*m*m,k=3*d*w*w,C=3*g*b*b,j=6*f*f*m,B=6*d*d*w,P=6*g*g*b,E=4.0767416621*y-3.3077115913*O+.2309699292*M-1,S=4.0767416621*x-3.3077115913*k+.2309699292*C,_=4.0767416621*j-3.3077115913*B+.2309699292*P,V=S/(S*S-.5*E*_),F=-E*V,D=-1.2684380046*y+2.6097574011*O-.3413193965*M-1,I=-1.2684380046*x+2.6097574011*k-.3413193965*C,A=-1.2684380046*j+2.6097574011*B-.3413193965*P,z=I/(I*I-.5*D*A),N=-D*z,L=-.0041960863*y-.7034186147*O+1.707614701*M-1,W=-.0041960863*x-.7034186147*k+1.707614701*C,T=-.0041960863*j-.7034186147*B+1.707614701*P,q=W/(W*W-.5*L*T),G=-L*q;F=V>=0?F:1e6,N=z>=0?N:1e6,G=q>=0?G:1e6,r+=Math.min(F,Math.min(N,G))}return r}function Y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n||(n=Q(t,e));var i=n[0],o=n[1];return[o/i,o/(1-i)]}function Z(t,e,n){var i,o,r=Q(e,n),a=X(e,n,t,1,t,r),c=Y(e,n,r),s=.11516993+1/(7.4477897+4.1590124*n+e*(1.75198401*n-2.19557347+e*(-2.13704948-10.02301043*n+e*(5.38770819*n-4.24894561+4.69891013*e)))),u=.11239642+1/(1.6132032-.68124379*n+e*(.40370612+.90148123*n+e*(.6122399*n-.27087943+e*(.00299215-.45399568*n-.14661872*e)))),h=a/Math.min(t*c[0],(1-t)*c[1]),l=t*s,f=(1-t)*u;i=.9*h*Math.sqrt(Math.sqrt(1/(1/(l*l*l*l)+1/(f*f*f*f))));var d=.4*t,g=.8*(1-t);return o=Math.sqrt(1/(1/(d*d)+1/(g*g))),[o,i,a]}function tt(t,e,n){if(1==n)return[255,255,255];if(0==n)return[0,0,0];var i,o,r,a,c,s=Math.cos(2*Math.PI*t),u=Math.sin(2*Math.PI*t),h=$(n),l=Z(h,s,u),f=l[0],d=l[1],g=l[2];e<.8?(o=1.25*e,r=0,a=.8*f,c=1-a/d):(o=5*(e-.8),r=d,a=.2*d*d*1.25*1.25/f,c=1-a/(g-d)),i=r+o*a/(1-c*o);var v=U(h,i*s,i*u);return[255*R(v[0]),255*R(v[1]),255*R(v[2])]}function et(t,e,n){function i(t){var e=Math.round(t).toString(16);return 1==e.length?"0"+e:e}return"#"+i(t)+i(e)+i(n)}function nt(t){if("standard"==t.kind)return it(t);if("okhsl"==t.kind){var e=tt(t.hue/360,t.saturation/100,t.light/100);return{red:e[0],green:e[1],blue:e[2],alpha:255}}throw""}function it(t){var e,n,i,o=t.hue/360,r=t.light/100,a=t.saturation/100;if(0==a)e=n=i=r;else{var c=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=r<.5?r*(1+a):r+a-r*a,u=2*r-s;e=c(u,s,o+1/3),n=c(u,s,o),i=c(u,s,o-1/3)}return{red:Math.round(255*e),green:Math.round(255*n),blue:Math.round(255*i),alpha:255}}function ot(t){var e=nt(t);return et(e.red,e.green,e.blue)}var rt=new Map([["C",0],["G",30],["D",60],["A",90],["E",120],["B",150],["F#",180],["Db",210],["Ab",240],["Eb",270],["Bb",300],["F",330]]);function at(t,e,n){var i=e.okHSL?"okhsl":"standard";return n.map((function(n){var o=G(n.note)-21;return{hue:Math.abs(360-rt.get(n.note.class)+t.degreeOffset+rt.get(t.tonic))%360,saturation:(88-o)*((e.saturationCeiling-e.saturationFloor)/88)+e.saturationFloor,light:o*((e.lightCeiling-e.lightFloor)/88)+e.lightFloor,kind:i}}))}function ct(t){return{x:Math.cos(t.hue/180*Math.PI)*t.saturation,y:Math.sin(t.hue/180*Math.PI)*t.saturation,z:t.light}}function st(t,e){var n=180*Math.atan2(t.y,t.x)/Math.PI;return{hue:n<0?360+n:n,saturation:Math.sqrt(t.x*t.x+t.y*t.y),light:t.z,kind:e}}function ut(t,e,n){if(1==e.length)return e[0];e.length;for(var i=0,o={x:0,y:0,z:0},r=0;r<e.length;r++){var a=0==r?t.rootBias:r==e.length-1?t.melodyBias:1;a*=t.considerVelocity?n[r]:1,i+=a;var c=ct(e[r]);o.x+=c.x*a,o.y+=c.y*a,o.z+=c.z*a}return o.x/=i,o.y/=i,o.z/=i,st(o,e[0].kind)}function ht(t,e){var n=function(e,n){return{hue:e,light:i(n),saturation:o(n),kind:t.kind}},i=function(e){return Math.min(100,100/88*e+t.light)},o=function(e){return Math.max(0,t.saturation-100/88*e)},r=1,a=[{color:t,weight:1}],c=function(t){r++;var n=1/(e.backoffCoefficient*r);a.push({color:t,weight:n})};return e.numberOvertones>=1&&c(n(t.hue,12)),e.numberOvertones>=2&&c(n(t.hue-31,19)),e.numberOvertones>=3&&c(n(t.hue,24)),e.numberOvertones>=4&&c(n((t.hue-120+4.2)%360,28)),e.numberOvertones>=5&&c(n(t.hue-31,31)),e.numberOvertones>=6&&c(n((t.hue+60+9.3)%360,34)),lt(a),a}function lt(t){var e=t.map((function(t){return t.weight})).reduce((function(t,e){return t+e}),0);t.forEach((function(t){return t.weight/=e}))}var ft=n("c62b"),dt=n.n(ft),gt=(n("0481"),n("4069"),function(t,e,n){});function vt(t){return{circleConfig:t.circle,mixConfig:t.mix,renderConfig:t.render,overtoneConfig:t.overtone,decayConfig:t.decay,colorConfig:t.color}}function pt(t,e){var n=e.width,i=e.height,o=new Uint8ClampedArray(n*i*4),r=new ImageData(o,n);return function(e,n,i){var a=mt(e,n);if(0==a.length)i();else{for(var c=0;c<o.length;c+=4){var s=a[Math.floor(Math.random()*a.length)];o[c]=s.red,o[c+1]=s.green,o[c+2]=s.blue,o[c+3]=s.alpha}t.putImageData(r,0,0)}}}function mt(t,e){var n=t.getNotes(),i=n.map((function(t){return t.velocity})),o=at(e.circleConfig,e.colorConfig,n);if(0==o.length)return[];var r=Object(a["a"])(o);r.length>1&&r.push(ut(e.mixConfig,r,i));for(var c=r.map((function(t){return ht(t,e.overtoneConfig)})),s=0;s<c.length;s++)0==s?c[s].forEach((function(t){return t.weight*=e.renderConfig.rootBias})):s==c.length-1?c[s].forEach((function(t){return t.weight*=e.renderConfig.emergentBias})):s==c.length-2?c[s].forEach((function(t){return t.weight*=e.renderConfig.melodyBias})):c[s].forEach((function(t){return t.weight*=e.renderConfig.middleBias}));var u=c.flat();lt(u);var h=[];return u.forEach((function(t){for(var e=Object(p["a"])(Object(p["a"])({},nt(t.color)),{},{alpha:255}),n=0;n<Math.floor(1e4*t.weight);n++)h.push(e)})),h}function wt(t,e){t.putImageData(e.image,e.box.xOrigin,e.box.yOrigin)}function bt(t,e){var n=Math.floor(t.width*e)-1,i=Math.ceil(t.width*(1-e))-1,o={width:n,height:t.height,xOrigin:t.xOrigin,yOrigin:t.yOrigin},r={width:i,height:t.height,xOrigin:t.xOrigin+n,yOrigin:t.yOrigin};return[o,r]}function yt(t,e){var n=Math.floor(t.height*e),i=Math.ceil(t.height*(1-e)),o={width:t.width,height:n,xOrigin:t.xOrigin,yOrigin:t.yOrigin},r={width:t.width,height:i,xOrigin:t.xOrigin,yOrigin:t.yOrigin+n};return[o,r]}function Ot(t,e){for(var n=new Uint8ClampedArray(t.width*t.height*4),i=new ImageData(n,t.width),o=0;o<t.height;o++)for(var r=o*t.width,a=0;a<t.width;a++){var c=4*(a+r),s=e(a,o);n[c]=s.red,n[c+1]=s.green,n[c+2]=s.blue,n[c+3]=s.alpha}return{box:t,image:i}}var Mt=function(t){Object(h["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.options=k,t.midiBatcher=new J,t.ctx=void 0,t.randomPixelator=gt,t.concentricPixelator=function(t,e,n,i,o){},t.wheelDrawer=function(t,e){},t}return Object(u["a"])(n,[{key:"resize",value:function(){this.options.canvas.width=window.innerWidth,this.options.canvas.height=window.innerHeight,this.randomPixelator=pt(this.ctx,this.options.canvas),this.concentricPixelator=this.makeConcentricPixelator(this.ctx,this.options.canvas),this.wheelDrawer=this.makeColorWheelDrawer(this.ctx,{width:this.options.canvas.width,height:this.options.canvas.height,xOrigin:0,yOrigin:0})}},{key:"created",value:function(){window.addEventListener("resize",this.resize)}},{key:"destroyed",value:function(){window.removeEventListener("resize",this.resize)}},{key:"drawAll",value:function(t,e,n){for(var i=n.height,o=n.width,r=e.length,a=i/r,c=0;c<r;c++)for(var s=e[c],u=s.length,h=o/u,l=0;l<u;l++){var f=s[l];t.beginPath(),t.fillStyle=f,t.rect(l*h+n.xOrigin,c*a+n.yOrigin,h,a),t.fill()}}},{key:"makeLightColorWheel",value:function(t,e,n){var i=e.width/2,o=e.height/2,r=Math.min(e.width,e.height)/2;return console.log(e,i,o,r),Ot(e,(function(e,a){var c=Math.sqrt((e-i)*(e-i)+(a-o)*(a-o));if(c<r){var s=(Math.atan2(a-o,e-i)*(180/Math.PI)+360+90)%360,u={hue:(360-s+n)%360,saturation:100,light:100*c/r,kind:t};return nt(u)}return{red:0,green:0,blue:0,alpha:0}}))}},{key:"makeSaturatedColorWheel",value:function(t,e,n){var i=e.width/2,o=e.height/2,r=Math.min(e.width,e.height)/2;return Ot(e,(function(e,a){var c=Math.sqrt((e-i)*(e-i)+(a-o)*(a-o));if(c<r){var s=(Math.atan2(a-o,e-i)*(180/Math.PI)+360+90)%360,u={hue:(360-s+n)%360,saturation:100*c/r,light:50,kind:t};return nt(u)}return{red:0,green:0,blue:0,alpha:0}}))}},{key:"makeColorWheelDrawer",value:function(t,e){var n=this,i=void 0,o=void 0,r=void 0,a=yt(e,.85),s=Object(c["a"])(a,2),u=s[0],h=s[1],l=bt(u,.5),f=Object(c["a"])(l,2),d=f[0],g=f[1];return console.log(d,g),function(e,a,c){var s=a.wheelViewModeConfig,u=a.color.standardHSL?"standard":"okhsl";void 0!=r&&r===u||(i=n.makeLightColorWheel(u,d,c),o=n.makeSaturatedColorWheel(u,g,c),r=u),wt(t,i),wt(t,o);var l=function(e,n,i,o,r){var a=e.width/2+e.xOrigin,h=e.height/2+e.yOrigin,l=Math.min(e.width,e.height)/2,f=Math.floor(l*s.spotlightScaleFactor/(i+1)),d=(360-n.hue-90+c)%360*Math.PI/180,g=o(n)*l/100,v=g*Math.cos(d),p=g*Math.sin(d);t.lineWidth=r?2*s.lineWidth:s.lineWidth,t.beginPath(),t.arc(v+a,p+h,r?1.5*f:f,0,2*Math.PI),t.strokeStyle=ot({hue:(n.hue+180)%360,saturation:100-n.saturation,light:100-n.light,kind:u}),t.fillStyle=ot(n),t.stroke(),t.fill()};t.clearRect(h.xOrigin,h.yOrigin,h.width,h.height),s.showOvertones?n.drawAll(t,L(e,ot),h):n.drawAll(t,[e.map((function(t){return ot(t[0])}))],h);for(var f=0;f<e.length;f++)if((!s.showEmergentOnly||f==e.length-1)&&(s.showEmergence||f!=e.length-1))for(var v=e[f],p=0;p<v.length;p++)if(s.showOvertones||!(p>0)){var m=v[p];l(d,m,p,(function(t){return t.light}),f==e.length-1),l(g,m,p,(function(t){return t.saturation}),f==e.length-1)}}}},{key:"makeConcentricPixelator",value:function(t,e){var n=e.width,i=e.height,o=n*i*4,r=new Uint8ClampedArray(n*i*4),a=new ImageData(r,n);return function(e,n,i,c,s){performance.now();var u=o/e.length-1;u-=u%4,u=Math.min(u,o);for(var h=u,l=0,f=(h+l)/2,d=(h-l)/2,g=0;g<h;g+=4)for(var v=Math.abs(g-f)/d*i,p=Math.random()-c,m=0;m<e.length;m++){var w=p<v?n[Math.floor(Math.random()*n.length)]:e[e.length-m-1][Math.floor(Math.random()*e[m].length)];r[m*u+g]=w.red,r[m*u+g+1]=w.green,r[m*u+g+2]=w.blue,r[m*u+g+3]=255}performance.now();t.putImageData(a,0,0)}}},{key:"mounted",value:function(){var t=this,e=document.getElementById("canvas"),n=e.getContext("2d");this.ctx=n,this.resize();var i=0,o=function(){i>t.options.display.waitBeforeClearMilliseconds?(n.clearRect(0,0,t.options.canvas.width,t.options.canvas.height),i=0):i+=t.options.display.tickMilliseconds},r=function(){var e=t.midiBatcher.getNotes(),i=at(t.options.circle,t.options.color,e);if(0==i.length)o();else{var r=ut(t.options.mix,i,e.map((function(t){return t.velocity})));n.clearRect(0,0,t.options.canvas.width,t.options.canvas.height),n.rect(0,0,t.options.canvas.width,t.options.canvas.height),n.fillStyle=ot(r),n.fill()}},c=function(){var e=t.midiBatcher.getNotes(),i=at(t.options.circle,t.options.color,e);if(0==i.length)o();else{var r=i.map((function(e){return ht(e,t.options.overtone).map((function(t){return t.color}))}));r.push(W(r,(function(n){return ut(t.options.mix,n,e.map((function(t){return t.velocity})))})));var a=L(r,ot);t.drawAll(n,a,{width:t.options.canvas.width,height:t.options.canvas.height,xOrigin:0,yOrigin:0})}},s=function(){var e=t.midiBatcher.getNotes(),n=e.map((function(t){return t.velocity})),i=at(t.options.circle,t.options.color,e);if(0==i.length)o();else{var r=Object(a["a"])(i),c=r.map((function(e){return ht(e,t.options.overtone)})),s=r.length>0?ht(ut(t.options.mix,r,n),t.options.overtone):[],u=[];c.forEach((function(t){var e=[];t.forEach((function(t){for(var n=nt(t.color),i=0;i<Math.floor(100*t.weight);i++)e.push(n)})),u.push(e)}));var h=[];s.forEach((function(t){for(var e=nt(t.color),n=0;n<Math.floor(100*t.weight);n++)h.push(e)})),t.concentricPixelator(u,h,t.options.render.emergentBias,t.options.render.emergentBiasFloor,t.options.mix.considerVelocity?n:void 0)}},u=function(){var e=t.midiBatcher.getNotes(),n=at(t.options.circle,t.options.color,e),i=Object(a["a"])(n),o=i.map((function(e){return ht(e,t.options.overtone)}));if(o.length>0){var r=ht(ut(t.options.mix,i,e.map((function(t){return t.velocity}))),t.options.overtone);o.push(r)}t.wheelDrawer(L(o,(function(t){return t.color})),t.options,t.options.circle.degreeOffset)},h=function(){t.midiBatcher.tick(),t.options.viewMode.single?r():t.options.viewMode.overtoneGrid?c():t.options.viewMode.wheel?u():t.options.viewMode.randomPixelation?t.randomPixelator(t.midiBatcher,vt(t.options),o):s()},l=function e(){h(),setTimeout(e,t.options.display.tickMilliseconds)};setTimeout(l,this.options.display.tickMilliseconds),dt.a.enable((function(e){void 0!=e?console.log("Error trying to setup midi listener: "+e.name):console.log("Successfully set up midi listner."),console.log(dt.a.inputs),console.log(dt.a.outputs),0==dt.a.inputs.length&&console.log("No midi input device detected.");var n=dt.a.inputs[0];n.addListener("midimessage","all",(function(e){e.data[0]>>4==11&&64==e.data[1]&&(e.data[2]<=63?t.midiBatcher.endSustain():t.midiBatcher.beginSustain())})),n.addListener("noteon","all",(function(e){t.midiBatcher.handleNoteOn(e.note.number,e.note.octave,e.velocity)})),n.addListener("noteoff","all",(function(e){t.midiBatcher.handleNoteOff(e.note.number)}))}),!0)}}]),n}(d["c"]);Mt=Object(f["a"])([Object(d["a"])({components:{OptionsEditor:_,VApp:V["a"],VMain:F["a"],VTabs:D["a"],VTab:I["a"],VTabItem:A["a"],VContainer:m["a"],VRow:w["a"],VCol:b["a"],VBtn:x["a"]}})],Mt);var xt=Mt,kt=xt,Ct=(n("5c0b"),Object(E["a"])(kt,o,r,!1,null,null,null)),jt=Ct.exports,Bt=n("f309"),Pt=(n("bf40"),new Bt["a"]({}));i["a"].use(Bt["a"]),i["a"].config.productionTip=!1,new i["a"]({vuetify:Pt,render:function(t){return t(jt)}}).$mount("#app")}});
//# sourceMappingURL=app.73e17d52.js.map