{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?c650","webpack:///./src/App.vue?524a","webpack:///./src/components/OptionsEditor.vue?9c63","webpack:///./src/domain/models/options.ts","webpack:///./src/components/OptionsEditor.vue","webpack:///./src/components/OptionsEditor.vue?3cdb","webpack:///./src/components/OptionsEditor.vue?ae06","webpack:///./src/domain/util/util.ts","webpack:///./src/domain/models/notes.ts","webpack:///./src/domain/services/midiBatcher.ts","webpack:///./src/domain/services/colorGiver.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticClass","model","callback","$$v","options","expression","attrs","canvas","width","height","staticRenderFns","on","onJsonChange","defaultOptions","circle","tonic","degreeOffset","viewMode","single","overtoneGrid","randomPixelation","concentricPixelation","mix","rootBias","melodyBias","render","middleBias","emergentBias","overtone","numberOvertones","backoffCoefficient","newValue","emit","components","VContainer","VRow","VCol","VSelect","VCheckbox","VTextField","VBtn","vueJsonEditor","component","mapcat","items","f","forEach","deepMap","map","is","flipMap","arr","midiToScientific","midi","octave","kind","class","noteDropdownOptions","num","letter","toString","NoteToMidi","note","toMidi","offsetFromRoot","solfege","octaveOffset","_notes","velocity","lifespan","sort","a","b","filter","ms","hslToRgb","hsl","g","h","hue","light","saturation","hue2rgb","q","red","Math","round","green","blue","hslToHex","min","k","color","max","padStart","fifths","Map","notesToColors","config","notes","pn","abs","hslToVector","x","cos","PI","y","sin","z","vectorToHsl","v","atan2","sqrt","mixColors","biases","colors","middleCount","totalDivider","weight","cv","colorOvertones","make","lighten","semitones","counter","addOvertone","thisWeight","normalizeWeights","weightedColors","totalWeight","wc","reduce","midiBatcher","ctx","undefined","dimensions","rows","rowSize","colorsInRow","cols","colSize","thisColor","beginPath","fillStyle","rect","fill","Uint8ClampedArray","imageData","ImageData","rgbs","floor","random","putImageData","totalElements","emergent","end","begin","midpoint","thisRgbs","document","getElementById","getContext","renderSingleColor","getNotes","clearRect","tick","renderOvertonesGrid","withOvertones","console","log","hexOvertones","drawAll","pixelateRandomly","rawColors","cs","flatColors","flat","drawingPool","rgb","randomPixelator","pixelateConcentrically","wcs","emergentDrawingPool","concentricPixelator","go","setInterval","enable","ex","inputs","outputs","input","addListener","e","handleNoteOn","number","handleNoteOff","_","makeRandomPixelator","makeConcentricPixelator","OptionsEditor","VApp","VMain","VTabs","VTab","VTabItem","vuetify","use","productionTip","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,W,0HCAI,EAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACA,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiB,CAACG,MAAM,CAACvB,MAAOgB,EAAW,QAAEQ,SAAS,SAAUC,GAAMT,EAAIU,QAAQD,GAAKE,WAAW,cAAc,IAAI,GAAGP,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACQ,MAAM,CAAC,GAAK,SAAS,MAAQZ,EAAIU,QAAQG,OAAOC,MAAM,OAASd,EAAIU,QAAQG,OAAOE,aAAa,IAAI,IAAI,IAC9aC,EAAkB,G,sZCDlB,EAAS,WAAa,IAAIhB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,kBAAkB,CAACQ,MAAM,CAAC,iBAAkB,GAAMK,GAAG,CAAC,cAAcjB,EAAIkB,cAAcX,MAAM,CAACvB,MAAOgB,EAAW,QAAEQ,SAAS,SAAUC,GAAMT,EAAIU,QAAQD,GAAKE,WAAW,cAAc,IAC7R,EAAkB,G,gGC+BTQ,EAA0B,CACnCC,OAAQ,CAAEC,MAAO,IAAKC,aAAc,IACpCC,SAAU,CAAEC,QAAQ,EAAOC,cAAc,EAAOC,kBAAkB,EAAOC,sBAAsB,GAC/Fd,OAAQ,CAAEC,MAAO,KAAMC,OAAQ,MAC/Ba,IAAK,CAAEC,SAAU,IAAKC,WAAY,KAClCC,OAAQ,CAAEF,SAAU,EAAGG,WAAY,EAAGF,WAAY,EAAGG,aAAc,GACnEC,SAAU,CAAEC,gBAAiB,EAAGC,mBAAoB,M,YClBnC,EAArB,yG,0BAEY,EAAA1B,QAAA,kBAAyBS,GAFrC,8DAIiBkB,GACTpC,KAAKS,QAAU2B,EACfpC,KAAKqC,SANb,6BAWQ,OAAOrC,KAAKS,YAXpB,GAA2C,QAUvC,gBADC,eAAK,U,mBAGL,MAZgB,EAAa,gBAPjC,eAAW,CACV6B,WAAY,CACRC,aAAA,KAAYC,OAAA,KAAMC,OAAA,KAClBC,UAAA,KAASC,YAAA,KAAWC,aAAA,KACpBC,OAAA,KAAMC,cAAA,WAGS,WCpBmX,I,YCOpYC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,oICjBR,SAAUC,EAAaC,EAAYC,GACtC,IAAM3F,EAAc,GAIpB,OAHA0F,EAAME,SAAQ,SAAA3G,GACV0G,EAAE1G,GAAG2G,SAAQ,SAAAzF,GAAC,OAAIH,EAAOP,KAAKU,SAE3BH,EAGL,SAAU6F,EAAcH,EAAcC,GAExC,OAAOD,EAAMI,KAAI,SAAAC,GAAE,OAAIA,EAAGD,IAAIH,MAG5B,SAAUK,EAAcN,EAAcC,GAGxC,IADA,IAAM3F,EAAc,GAFoC,WAG/Cf,GACLe,EAAOP,KAAKkG,EAAED,EAAMI,KAAI,SAAAG,GAAG,OAAIA,EAAIhH,SAD9BA,EAAI,EAAGA,EAAIyG,EAAM,GAAGvG,OAAQF,IAArC,EAASA,GAET,OAAOe,ECcL,SAAUkG,EAAiBC,EAAcC,GAC3C,IAAMvF,EAAgBsF,EAAO,IAAM,EAAI,IACjCA,EAAO,IAAM,GAAK,KAClBA,EAAO,IAAM,GAAK,IAClBA,EAAO,IAAM,EAAI,IACjBA,EAAO,IAAM,EAAI,KACjBA,EAAO,IAAM,EAAI,IACjBA,EAAO,IAAM,EAAI,KACjBA,EAAO,IAAM,EAAI,IACjBA,EAAO,IAAM,EAAI,IACjBA,EAAO,IAAM,EAAI,KACjBA,EAAO,IAAM,EAAI,IACjB,KAEN,MAAO,CAAEE,KAAM,aAAcC,MAAOzF,EAAGuF,OAAQA,GAS5C,IAAMG,EAAsB,CAAC,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,MAE1Cd,EACjD,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IACtB,SAAAe,GAAG,OAAID,EAAoBT,KAAI,SAAAW,GAAM,OAAIA,EAASD,EAAIE,iBAGpD,SAAUC,EAAWC,GACvB,MAAoB,QAAbA,EAAKP,KAAiBO,EAAKT,KACf,cAAbS,EAAKP,KAAuB,eAAUO,EAAKN,MAAQM,EAAKR,OAAOM,YAAYG,SAC3EC,EAAeF,EAAKG,QAAQA,SAAW,GAAKH,EAAKG,QAAQC,aAAeL,EAAWC,EAAK/C,OAa5F,SAAUiD,EAAeC,GAC3B,MAAkB,MAAXA,EAAkB,EACR,MAAXA,EAAkB,EACP,MAAXA,EAAkB,EACP,MAAXA,GACW,MAAXA,EADkB,EAEP,MAAXA,EAAkB,EACP,MAAXA,EAAkB,EACP,MAAXA,GACW,MAAXA,EADkB,EAEP,MAAXA,EAAkB,EACP,MAAXA,GACW,MAAXA,EADkB,EAEP,MAAXA,EAAkB,EACP,MAAXA,GACW,MAAXA,EADkB,GAEP,MAAXA,EAAkB,IACjB,E,cCxFE,EAAb,WAGI,oCAFQ,KAAAE,OAAuB,GADnC,4DAOiBL,EAAsBM,GAE/BzE,KAAKwE,OAAOxH,KAAK,CAACyH,SAAUA,EAAUN,KAAMA,EAAMO,SAAU,IAC5D1E,KAAKwE,OAAOG,MAAK,SAACC,EAAGC,GAAJ,OAAUX,EAAWU,EAAET,MAAQD,EAAWW,EAAEV,WAVrE,oCAakBA,GAEVnE,KAAKwE,OAASxE,KAAKwE,OAAOM,QAAO,SAAAvF,GAAC,QAAMA,EAAE4E,KAAKN,OAASM,EAAKN,OAAStE,EAAE4E,KAAKR,QAAUQ,EAAKR,aAfpG,iCAqBQ,OAAO3D,KAAKwE,SArBpB,2BAwBSO,GAED/E,KAAKwE,OAAOrB,SAAQ,SAAA5D,GAAC,OAAIA,EAAEmF,SAAWnF,EAAEmF,SAAWK,SA1B3D,K,8BC4BM,SAAUC,EAASC,GACrB,IAIIrG,EAAGsG,EAAGL,EAJJM,EAAIF,EAAIG,IAAM,IACdlH,EAAI+G,EAAII,MAAQ,IAChBvH,EAAImH,EAAIK,WAAa,IAI3B,GAAQ,GAALxH,EACCc,EAAIsG,EAAIL,EAAI3G,MACX,CACD,IAAMqH,EAAU,SAAiB7F,EAAW8F,EAAWxG,GAGnD,OAFGA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUU,EAAc,GAAT8F,EAAI9F,GAASV,EAClCA,EAAI,GAAYwG,EAChBxG,EAAI,EAAE,EAAUU,GAAK8F,EAAI9F,IAAM,EAAE,EAAIV,GAAK,EACtCU,GAGL8F,EAAItH,EAAI,GAAMA,GAAK,EAAIJ,GAAKI,EAAIJ,EAAII,EAAIJ,EACxC4B,EAAI,EAAIxB,EAAIsH,EAClB5G,EAAI2G,EAAQ7F,EAAG8F,EAAGL,EAAI,EAAE,GACxBD,EAAIK,EAAQ7F,EAAG8F,EAAGL,GAClBN,EAAIU,EAAQ7F,EAAG8F,EAAGL,EAAI,EAAE,GAG5B,MAAO,CAACM,IAAKC,KAAKC,MAAU,IAAJ/G,GAAUgH,MAAOF,KAAKC,MAAU,IAAJT,GAAUW,KAAMH,KAAKC,MAAU,IAAJd,IAI7E,SAAUiB,EAASb,GACvB,IAAME,EAAIF,EAAIG,IAAWlH,EAAI+G,EAAII,MAAQ,IAAWvH,EAAImH,EAAIK,WACtDV,EAAI9G,EAAI4H,KAAKK,IAAI7H,EAAG,EAAIA,GAAK,IAC7BgF,EAAI,SAAC3D,GACT,IAAMyG,GAAKzG,EAAI4F,EAAI,IAAM,GACnBc,EAAQ/H,EAAI0G,EAAIc,KAAKQ,IAAIR,KAAKK,IAAIC,EAAI,EAAG,EAAIA,EAAG,IAAK,GAC3D,OAAON,KAAKC,MAAM,IAAMM,GAAOhC,SAAS,IAAIkC,SAAS,EAAG,MAE1D,iBAAWjD,EAAE,IAAb,OAAkBA,EAAE,IAApB,OAAyBA,EAAE,IAG7B,IAAMkD,EAAkC,IAAIC,IACxC,CACI,CAAC,IAAK,GACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,KAAM,KACP,CAAC,KAAM,KACP,CAAC,KAAM,KACP,CAAC,KAAM,KACP,CAAC,KAAM,KACP,CAAC,IAAK,OAMR,SAAUC,EAAcC,EAAsBC,GAChD,OAAOA,EAAMnD,KAAI,SAAAoD,GAGT,MAAO,CACHrB,IAAKM,KAAKgB,IAAK,IAAMN,EAAOzH,IAAI8H,EAAGtC,KAAKN,OAAU0C,EAAOlF,aAAe+E,EAAOzH,IAAI4H,EAAOnF,QAAY,IACtGkE,WAAY,KAAO,GAAM,GAAMmB,EAAGhC,UAClCY,OAAQnB,EAAWuC,EAAGtC,MAAQ,KAAO,IAAM,QAM3D,SAASwC,EAAY1B,GAEjB,MAAO,CACH2B,EAAGlB,KAAKmB,IAAI5B,EAAIG,IAAM,IAAMM,KAAKoB,IAAM7B,EAAIK,WAC3CyB,EAAGrB,KAAKsB,IAAI/B,EAAIG,IAAM,IAAMM,KAAKoB,IAAM7B,EAAIK,WAC3C2B,EAAGhC,EAAII,OAIf,SAAS6B,EAAYC,GACjB,IAAMhC,EAA2B,IAAvBO,KAAK0B,MAAMD,EAAEJ,EAAGI,EAAEP,GAAWlB,KAAKoB,GAC5C,MAAO,CACH1B,IAAKD,EAAI,EAAI,IAAMA,EAAIA,EACvBG,WAAaI,KAAK2B,KAAKF,EAAEP,EAAIO,EAAEP,EAAIO,EAAEJ,EAAII,EAAEJ,GAC3C1B,MAAO8B,EAAEF,GAIX,SAAUK,EAAUC,EAAiBC,GACvC,GAAqB,GAAjBA,EAAO9K,OAEP,OAAO8K,EAAO,GAOlB,IALA,IAAMC,EAAcD,EAAO9K,OAAS,EAC9BgL,EAAeH,EAAO3F,SAAW2F,EAAO1F,WAAa4F,EAGrDN,EAAI,CAAEP,EAAG,EAAGG,EAAG,EAAGE,EAAG,GAClBzK,EAAI,EAAGA,EAAIgL,EAAO9K,OAAQF,IACnC,CACI,IAAMmL,EAAc,GAALnL,EAAS+K,EAAO3F,SACzBpF,GAAKgL,EAAO9K,OAAS,EAAI6K,EAAO1F,WAChC,EAEA+F,EAAKjB,EAAYa,EAAOhL,IAC9B2K,EAAEP,GAAKgB,EAAGhB,EAAIe,EACdR,EAAEJ,GAAKa,EAAGb,EAAIY,EACdR,EAAEF,GAAKW,EAAGX,EAAIU,EAOlB,OAJAR,EAAEP,GAAKc,EACPP,EAAEJ,GAAKW,EACPP,EAAEF,GAAKS,EAEAR,EAAYC,GAGjB,SAAUU,EAAe5B,EAAYM,GACvC,IAAMuB,EAAO,SAAC3C,EAAWjH,GAAZ,MAA2B,CAACkH,IAAKD,EAAGE,MAAOnH,EAAGoH,WAAYW,EAAMX,aACvEyC,EAAU,SAACC,GAAD,OAAuBtC,KAAKK,IAAI,IAAM,IAAI,GAAMiC,EAAY/B,EAAMZ,QAE9E4C,EAAU,EAER1K,EAAwB,CAAC,CAAE0I,MAAOA,EAAO0B,OAAQ,IAEjDO,EAAc,SAAC9J,GACjB6J,IACA,IAAME,EAAa,GAAK5B,EAAOpE,mBAAqB8F,GACpD1K,EAAOP,KAAK,CAACiJ,MAAO7H,EAAGuJ,OAAQQ,KAoBnC,OAfI5B,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,EAAK7B,EAAMb,IAAK2C,EAAQ,MACpCxB,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,EAAK7B,EAAMb,IAAM,GAAI2C,EAAQ,MACzCxB,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,EAAK7B,EAAMb,IAAK2C,EAAQ,MACpCxB,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,GAAM7B,EAAMb,IAAM,IAAM,KAAe,IAAK2C,EAAQ,MAChExB,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,EAAK7B,EAAMb,IAAM,GAAI2C,EAAQ,MACzCxB,EAAOrE,iBAAmB,GAC1BgG,EAAYJ,GAAM7B,EAAMb,IAAM,GAAK,KAAc,IAAK2C,EAAQ,MAElEK,EAAiB7K,GAEVA,EAGL,SAAU6K,EAAiBC,GAC7B,IAAMC,EAAcD,EAAehF,KAAI,SAAAkF,GAAE,OAAIA,EAAGZ,UAAQa,QAAO,SAAC5B,EAAGG,GAAJ,OAAUH,EAAIG,IAAG,GAChFsB,EAAelF,SAAQ,SAAAoF,GAAE,OAAIA,EAAGZ,QAAUW,K,4BCtJzB,GAArB,yG,0BAEU,EAAA7H,QAAmBS,EACnB,EAAAuH,YAA2B,IAAI,EAE/B,EAAAC,SAA8CC,EALxD,yDAuBUD,EAA+BlB,EAAsBoB,GAO3D,IALA,IAAM9H,EAAS8H,EAAW9H,OACpBD,EAAQ+H,EAAW/H,MAEnBgI,EAAOrB,EAAO9K,OACdoM,EAAUhI,EAAS+H,EAChBjK,EAAI,EAAGA,EAAIiK,EAAMjK,IAMxB,IAJA,IAAMmK,EAAcvB,EAAO5I,GACrBoK,EAAOD,EAAYrM,OACnBuM,EAAUpI,EAAQmI,EAEf5K,EAAI,EAAGA,EAAI4K,EAAM5K,IAC1B,CACE,IAAM8K,EAAYH,EAAY3K,GAC9BsK,EAAIS,YACJT,EAAIU,UAAYF,EAChBR,EAAIW,KAAKjL,EAAI6K,EAASrK,EAAIkK,EAASG,EAASH,GAC5CJ,EAAIY,UA1CZ,0CAgDsBZ,EAA+BE,GAEjD,IAAM/H,EAAQ+H,EAAW/H,MACnBC,EAAS8H,EAAW9H,OAEpB0C,EAAM,IAAI+F,kBAAkB1I,EAAQC,EAAS,GAC7C0I,EAAY,IAAIC,UAAUjG,EAAK3C,GACrC,OAAO,SAAC6I,GAEN,IAAK,IAAIlN,EAAI,EAAGA,EAAIgH,EAAI9G,OAAQF,GAAG,EACnC,CACE,IAAM4B,EAAIsL,EAAKhE,KAAKiE,MAAMjE,KAAKkE,SAASF,EAAKhN,SAC7C8G,EAAIhH,GAAK4B,EAAEqH,IACXjC,EAAIhH,EAAI,GAAK4B,EAAEwH,MACfpC,EAAIhH,EAAI,GAAK4B,EAAEyH,KACfrC,EAAIhH,EAAI,GAAK,IAGfkM,EAAImB,aAAaL,EAAW,EAAG,MAlErC,8CAuE0Bd,EAA+BE,GAErD,IAAM/H,EAAQ+H,EAAW/H,MACnBC,EAAS8H,EAAW9H,OAEpBgJ,EAAgBjJ,EAAQC,EAAS,EACjC0C,EAAM,IAAI+F,kBAAkB1I,EAAQC,EAAS,GAC7C0I,EAAY,IAAIC,UAAUjG,EAAK3C,GACrC,OAAO,SAAC6I,EAAeK,EAAiB/H,GAEtC,IAAK,IAAItE,EAAI,EAAGA,EAAIgM,EAAKhN,OAAQgB,IACjC,CACE,IAAIsM,GAAOtM,EAAI,GAAKoM,EAAgBJ,EAAKhN,OAAQ,EACjDsN,GAAaA,EAAM,EACnB,IAAIC,EAAQvM,EAAIoM,EAAgBJ,EAAKhN,OACrCuN,GAAiBA,EAAQ,EAMzB,IAJA,IAAMC,GAAYF,EAAMC,GAAS,EAC3B5L,GAAK2L,EAAMC,GAAS,EACpBE,EAAWT,EAAKA,EAAKhN,OAASgB,EAAI,GAE/BlB,EAAIyN,EAAOzN,EAAIwN,EAAKxN,GAAG,EAChC,CACE,IAAM4B,EAAIsH,KAAKkE,SAAYlE,KAAKgB,IAAIlK,EAAI0N,GAAY7L,EAAK2D,EACvD+H,EAASrE,KAAKiE,MAAMjE,KAAKkE,SAASG,EAASrN,SACzCyN,EAASzE,KAAKiE,MAAMjE,KAAKkE,SAASO,EAASzN,SAC/C8G,EAAIhH,GAAK4B,EAAEqH,IACXjC,EAAIhH,EAAI,GAAK4B,EAAEwH,MACfpC,EAAIhH,EAAI,GAAK4B,EAAEyH,KACfrC,EAAIhH,EAAI,GAAK,KAIjBkM,EAAImB,aAAaL,EAAW,EAAG,MAxGrC,gCA4GS,WAEG5I,EAASwJ,SAASC,eAAe,UACjC3B,EAAM9H,EAAO0J,WAAW,MAC9BtK,KAAK0I,IAAMA,EAEX,IAAM6B,EAAoB,WACtB,IAAM/C,EAASlB,EAAc,EAAK7F,QAAQU,OAAQ,EAAKsH,YAAY+B,YACnE,GAAqB,GAAjBhD,EAAO9K,OAEN,OAAHgM,QAAG,IAAHA,KAAK+B,UAAU,EAAG,EAAG,EAAKhK,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,YAGtE,CACE,IAAMmF,EAAQqB,EAAU,EAAK7G,QAAQkB,IAAK6F,GAC1CkB,EAAI+B,UAAU,EAAG,EAAG,EAAKhK,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,QACnE4H,EAAIW,KAAK,EAAG,EAAG,EAAK5I,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,QAC9D4H,EAAIU,UAAYtD,EAASG,GACzByC,EAAIY,OAEN,EAAKb,YAAYiC,KAAK,KAGpBC,EAAsB,WAC1B,IAAMnD,EAASlB,EAAc,EAAK7F,QAAQU,OAAQ,EAAKsH,YAAY+B,YACnE,GAAqB,GAAjBhD,EAAO9K,OAEN,OAAHgM,QAAG,IAAHA,KAAK+B,UAAU,EAAG,EAAG,EAAKhK,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,YAGtE,CACE,IAAM8J,EAAgBpD,EAAOnE,KAAI,SAAAjF,GAAC,OAAIyJ,EAAezJ,EAAG,EAAKqC,QAAQwB,UAAUoB,KAAI,SAAAkF,GAAE,OAAIA,EAAGtC,YAC5F4E,QAAQC,IAAIF,GACZA,EAAc5N,KAAKuG,EAAQqH,GAAe,SAAAxM,GAAC,OAAIkJ,EAAU,EAAK7G,QAAQkB,IAAKvD,OAC3E,IAAM2M,EAAe3H,EAAQwH,EAAe9E,GAC5C,EAAKkF,QAAQtC,EAAKqC,EAAc,EAAKtK,QAAQG,UAI3CqK,EAAmB,WACvB,IAAMC,EAAY5E,EAAc,EAAK7F,QAAQU,OAAQ,EAAKsH,YAAY+B,YACtE,GAAwB,GAApBU,EAAUxO,OAET,OAAHgM,QAAG,IAAHA,KAAK+B,UAAU,EAAG,EAAG,EAAKhK,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,YAGtE,CAEE,IAAMqK,EAAK,eAAKD,GACZC,EAAGzO,OAAS,GACdyO,EAAGnO,KAAKsK,EAAU,EAAK7G,QAAQkB,IAAKwJ,IAEtC,IADA,IAAMP,EAAgBO,EAAG9H,KAAI,SAAAjF,GAAC,OAAIyJ,EAAezJ,EAAG,EAAKqC,QAAQwB,aACxDzF,EAAI,EAAGA,EAAIoO,EAAclO,OAAQF,IAE/B,GAALA,EACFoO,EAAcpO,GAAG2G,SAAQ,SAAAoF,GAAE,OAAIA,EAAGZ,QAAU,EAAKlH,QAAQqB,OAAOF,YACzDpF,GAAKoO,EAAclO,OAAS,EACnCkO,EAAcpO,GAAG2G,SAAQ,SAAAoF,GAAE,OAAIA,EAAGZ,QAAU,EAAKlH,QAAQqB,OAAOE,gBACzDxF,GAAKoO,EAAclO,OAAS,EACnCkO,EAAcpO,GAAG2G,SAAQ,SAAAoF,GAAE,OAAIA,EAAGZ,QAAU,EAAKlH,QAAQqB,OAAOD,cAEhE+I,EAAcpO,GAAG2G,SAAQ,SAAAoF,GAAE,OAAIA,EAAGZ,QAAU,EAAKlH,QAAQqB,OAAOC,cAEpE,IAAMqJ,EAAaR,EAAcS,OACjCjD,EAAiBgD,GACjB,IAAME,EAAqB,GAC3BF,EAAWjI,SAAQ,SAAAoF,GAEjB,IADA,IAAMgD,EAAMvG,EAASuD,EAAGtC,OACf,EAAI,EAAG,EAAIP,KAAKiE,MAAM,IAAQpB,EAAGZ,QAAS,IACjD2D,EAAYtO,KAAKuO,MAGrB,EAAKC,gBAAgBF,KAInBG,EAAyB,WAC7B,IAAMP,EAAY5E,EAAc,EAAK7F,QAAQU,OAAQ,EAAKsH,YAAY+B,YACtE,GAAwB,GAApBU,EAAUxO,OAET,OAAHgM,QAAG,IAAHA,KAAK+B,UAAU,EAAG,EAAG,EAAKhK,QAAQG,OAAOC,MAAO,EAAKJ,QAAQG,OAAOE,YAGtE,CAEE,IAAMqK,EAAK,eAAKD,GACVN,EAAgBO,EAAG9H,KAAI,SAAAjF,GAAC,OAAIyJ,EAAezJ,EAAG,EAAKqC,QAAQwB,aAC3D8H,EAAWlC,EAAeP,EAAU,EAAK7G,QAAQkB,IAAKwJ,GAAK,EAAK1K,QAAQwB,UAExEqJ,EAAuB,GAC7BV,EAAczH,SAAQ,SAAAuI,GACpB,IAAMnO,EAAgB,GACtBmO,EAAIvI,SAAQ,SAAAoF,GAGV,IAFA,IAAMgD,EAAMvG,EAASuD,EAAGtC,OAEfzJ,EAAI,EAAGA,EAAIkJ,KAAKiE,MAAM,IAAMpB,EAAGZ,QAASnL,IAC/Ce,EAAOP,KAAKuO,MAEhBD,EAAYtO,KAAKO,MAInB,IAAMoO,EAA6B,GACnC5B,EAAS5G,SAAQ,SAAAoF,GAEf,IADA,IAAMgD,EAAMvG,EAASuD,EAAGtC,OACfzJ,EAAI,EAAGA,EAAIkJ,KAAKiE,MAAM,IAAMpB,EAAGZ,QAASnL,IAC/CmP,EAAoB3O,KAAKuO,MAG7B,EAAKK,oBAAoBN,EAAaK,EAAqB,EAAKlL,QAAQqB,OAAOE,gBAI7E6J,EAAK,WACT,EAAKpL,QAAQa,SAASC,OAASgJ,IAC7B,EAAK9J,QAAQa,SAASE,aAAemJ,IACrC,EAAKlK,QAAQa,SAASG,iBAAmBwJ,IACzCQ,KAGJK,YAAYD,EAAI,IAEhB,KAAQE,QAAO,SAAAC,QACHrD,GAANqD,EACFnB,QAAQC,IAAI,wCAA0CkB,EAAG1N,MAEzDuM,QAAQC,IAAI,qCAGdD,QAAQC,IAAI,KAAQmB,QACpBpB,QAAQC,IAAI,KAAQoB,SAES,GAAzB,KAAQD,OAAOvP,QACjBmO,QAAQC,IAAI,kCAGd,IAAMqB,EAAQ,KAAQF,OAAO,GAC7BE,EAAMC,YAAY,SAAU,OAAO,SAAAC,GACjC,EAAK5D,YAAY6D,aACf7I,EAAiB4I,EAAElI,KAAKoI,OAAQF,EAAElI,KAAKR,QACvC0I,EAAE5H,aAKN0H,EAAMC,YAAY,UAAW,OAAO,SAAAC,GAClC,EAAK5D,YAAY+D,cACf/I,EAAiB4I,EAAElI,KAAKoI,OAAQF,EAAElI,KAAKR,eAG1C,KAlQT,sCAQI,YAAmBgF,GAAZ3I,KAAK0I,IACR,SAAC+D,KACDzM,KAAK0M,oBAAoB1M,KAAK0I,IAAK1I,KAAKS,QAAQG,UAVxD,0CAcI,YAAmB+H,GAAZ3I,KAAK0I,IACR,SAACgB,EAAeK,EAAiB/H,KACjChC,KAAK2M,wBAAwB3M,KAAK0I,IAAK1I,KAAKS,QAAQG,YAhB5D,GAAiC,QAAZ,GAAG,gBATvB,eAAW,CACV0B,WAAY,CACVsK,cAAA,EACAC,OAAA,KAAMC,QAAA,KACNC,QAAA,KAAOC,OAAA,KAAMC,WAAA,KACb1K,aAAA,KAAYC,OAAA,KAAMC,OAAA,KAClBI,OAAA,SAGiB,cC1CuV,MCQxW,I,UAAY,eACd,GACA,EACA9B,GACA,EACA,KACA,KACA,OAIa,M,qBCbTmM,I,UAAU,IAAI,QAAQ,KAE5B,OAAIC,IAAI,SAER,OAAI5G,OAAO6G,eAAgB,EAE3B,IAAI,OAAI,CACNF,WACApL,OAAQ,SAAAqD,GAAC,OAAIA,EAAE,OACdkI,OAAO","file":"js/app.e99e9fe9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-main',[_c('v-container',[_c('v-row',[_c('v-col',{staticClass:\"lg-6\"},[_c('options-editor',{model:{value:(_vm.options),callback:function ($$v) {_vm.options=$$v},expression:\"options\"}})],1)],1),_c('v-row',[_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":_vm.options.canvas.width,\"height\":_vm.options.canvas.height}})])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vue-json-editor',{attrs:{\"expandedOnStart\":true},on:{\"json-change\":_vm.onJsonChange},model:{value:(_vm.options),callback:function ($$v) {_vm.options=$$v},expression:\"options\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Note, PitchClass, ScientificNote, scientificNote } from \"./notes\";\n\nexport type ViewMode = { single: boolean; overtoneGrid: boolean; randomPixelation: boolean; concentricPixelation: boolean; }\n\nexport type CircleConfig = { tonic: PitchClass; degreeOffset: number }\nexport type MixBias = { rootBias: number; melodyBias: number; }\nexport type RenderBias = { rootBias: number; middleBias: number; melodyBias: number; emergentBias: number }\nexport type OvertoneConfig = { numberOvertones: number; backoffCoefficient: number; }\n\nexport type CanvasOptions = { width: number; height: number; }\n\nexport type Options = {\n    circle: CircleConfig;\n    viewMode: ViewMode;\n    canvas: CanvasOptions;\n    mix: MixBias;\n    render: RenderBias;\n    overtone: OvertoneConfig;\n}\n\n\n// 60 20 20 | 50 \n// would mean 50% new cards that haven't been tested yet, until that runs out\n// then when a previously tested card is pulled, there is a :\n// 60% chance it's a card that is in the bottom third of your performance\n// 20% for 33-66th percentile\n// 20% for 67-100th percentile \nexport type Priorities = {\n    percentNew: number;\n    byPercentiles: number[];\n}\n\nexport const defaultOptions: Options = {\n    circle: { tonic: \"C\", degreeOffset: 60 },\n    viewMode: { single: false, overtoneGrid: false, randomPixelation: false, concentricPixelation: true },\n    canvas: { width: 1800, height: 1190 },\n    mix: { rootBias: 1.5, melodyBias: 1.5 },\n    render: { rootBias: 1, middleBias: 1, melodyBias: 1, emergentBias: 1 },\n    overtone: { numberOvertones: 7, backoffCoefficient: 1.5 }\n};","\n\n\n\n\n\n\nimport { Component, Watch, Emit, Prop, Vue } from \"vue-property-decorator\";\nimport { VBtn, VContainer, VRow, VCol, VSelect,VCheckbox, VTextField } from \"vuetify/lib\";\nimport { defaultOptions, Options } from \"../domain/models/options\";\nimport { Note, Octave, PitchClass } from \"../domain/models/notes\";\nimport vueJsonEditor from \"vue-json-editor\";\n\n@Component ({\n  components: {\n      VContainer, VRow, VCol,\n      VSelect, VCheckbox, VTextField,\n      VBtn, vueJsonEditor\n  }\n})\nexport default class OptionsEditor extends Vue {\n\n    private options: Options = { ... defaultOptions  };\n\n    onJsonChange(newValue: Options) {\n        this.options = newValue;\n        this.emit();\n    }\n\n    @Emit('input')\n    emit(): Options {\n        return this.options;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OptionsEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OptionsEditor.vue?vue&type=template&id=1f28639e&\"\nimport script from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./OptionsEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// This is flatmap, but JSRepl complains about flatmap, so I have to write my own.\n export function mapcat<A, B>(items: A[], f: (a: A) => B[]): B[] {\n    const result: B[] = [];\n    items.forEach(i => {\n        f(i).forEach(j => result.push(j));\n    });\n    return result;\n}\n\nexport function deepMap<A, B>(items: A[][], f: (a: A) => B)\n{\n    return items.map(is => is.map(f));\n}\n\nexport function flipMap<A, B>(items: A[][], f: (a: A[]) => B): B[]\n{\n    const result: B[] = [];\n    for (let i = 0; i < items[0].length; i++)\n        result.push(f(items.map(arr => arr[i])));\n    return result;\n}\n\nexport function randomNumberBetweenInclusive(low: number, high: number) {\n    return Math.floor(Math.random() * (high - low + 1) + low);\n}\n\nexport function drawRandom<T>(items: T[]): T {\n    return items[randomNumberBetweenInclusive(0, items.length - 1)];\n}\n\nexport type RandomSampleRepeatOptions = \"no-repeats\" | \"non-sequential-repeats\" | \"allow-repeats\"\nexport function drawRandomSample<T>(items: T[], size: number, repeatOptions: RandomSampleRepeatOptions): T[] {\n    const result: T[] = [];\n\n    if (repeatOptions == \"allow-repeats\") {\n        for (let i = 0; i < size; i++) {\n            result.push(drawRandom(items));\n        }\n    } else if (repeatOptions == \"no-repeats\") {\n        if (size > items.length) {\n            throw new Error(\"can't randomly sample \" + size.toString() + \" items with no repeats from a list with \" + items.length.toString() + \" elements.\");\n        }\n\n        const picked = new Set<number>();\n        let i = randomNumberBetweenInclusive(0, items.length - 1);\n\n        while (result.length < size) {\n            while (picked.has(i)) {\n                i = randomNumberBetweenInclusive(0, items.length - 1);\n            }\n            result.push(items[i]);\n            picked.add(i);\n        }\n    } else if (repeatOptions == \"non-sequential-repeats\") {\n        let lastPick = randomNumberBetweenInclusive(0, items.length - 1);\n        let nextPick = lastPick;\n        while (result.length < size) {\n            while (lastPick == nextPick) {\n                nextPick = randomNumberBetweenInclusive(0, items.length - 1);\n            }\n            result.push(items[nextPick]);\n            lastPick = nextPick;\n        }\n    }\n\n    return result;\n}\n\n// https://stackoverflow.com/a/12646864\nexport function shuffleArray<T>(array: T[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\n\nexport function doTimes<T>(f: () => T, count: number): T[] {\n    const result: T[] = [];\n    for (let i = 0; i < count; i++) {\n        result.push(f());\n    }\n    return result;\n}\n\nexport function indexBy<K, V>(items: V[], f: (v: V) => K): Map<K, V> {\n    const result = new Map<K, V>();\n    items.forEach(x => result.set(f(x), x));\n    return result;\n}","import { Frequency, Midi,  } from \"tone\";\nimport { mapcat } from \"../util/util\";\n\nexport type PitchClass = \"A\" | \"Bb\" | \"B\" | \"C\" | \"Db\" | \"D\" | \"Eb\" | \"E\" | \"F\" | \"F#\" | \"G\" | \"Ab\";\nexport type Octave =  0 | 1 | 2 | 3 | 4 | 5 | 6  | 7 |  8 ;\n\n\nexport type MidiNote = number;\nexport type ScientificNote = {kind: \"scientific\", class: PitchClass, octave: Octave}\n\nexport type SolfegeClass = \"do\" \n    | \"ra\" | \"re\" | \"ri\" \n    | \"me\" | \"mi\"\n    | \"fa\" | \"fi\"\n    | \"se\" | \"so\" | \"si\" \n    | \"le\" | \"la\" | \"li\"\n    | \"te\" | \"ti\"\n\nexport type OctaveSolfegeRelative = {octaveOffset: number, solfege: SolfegeClass};\n\nexport type Note =  \n    {kind: \"solfege\", solfege: OctaveSolfegeRelative, tonic: Note}\n    | {kind: \"midi\", midi: number} \n    | ScientificNote;\n\nexport function solfegeNote(solfege: OctaveSolfegeRelative, tonic: Note): Note {\n    return {kind: \"solfege\", solfege: solfege, tonic: tonic};\n}\n\nexport function scientificNote(pitchClass: PitchClass, octave: Octave): Note {\n    return {kind: \"scientific\", class: pitchClass, octave: octave};\n}\n\nexport function midiToScientific(midi: number, octave: number): ScientificNote {\n    const c: PitchClass = midi % 12 == 9 ? \"A\"\n        : midi % 12 == 10 ? \"Bb\"\n        : midi % 12 == 11 ? \"B\"\n        : midi % 12 == 0 ? \"C\"\n        : midi % 12 == 1 ? \"Db\"\n        : midi % 12 == 2 ? \"D\"\n        : midi % 12 == 3 ? \"Eb\"\n        : midi % 12 == 4 ? \"E\"\n        : midi % 12 == 5 ? \"F\"\n        : midi % 12 == 6 ? \"F#\"\n        : midi % 12 == 7 ? \"G\"\n        : \"Ab\";\n\n    return { kind: \"scientific\", class: c, octave: octave as Octave }\n}\n\nexport function midiNote(midi: number): Note {\n    return {kind: \"midi\", midi: midi};\n}\n\nexport type MusicalPhrase = Note[][];\n\nexport const noteDropdownOptions = ['A', 'Bb', 'B', 'C', 'Db', 'D', 'Eb', 'E', 'F', 'F#', 'G', 'Ab'];\n\nexport const numberedNoteDropdownOptions: string[] = mapcat(\n    [1, 2, 3, 4, 5, 6, 7, 8],\n    num => noteDropdownOptions.map(letter => letter + num.toString())\n);\n\nexport function NoteToMidi(note: Note): MidiNote {\n    return note.kind == \"midi\" ? note.midi\n        : note.kind == \"scientific\" ? Frequency(note.class + note.octave.toString()).toMidi()\n        : offsetFromRoot(note.solfege.solfege) + 12 * note.solfege.octaveOffset + NoteToMidi(note.tonic);\n}\n\nexport function noteToHumanReadable(note: Note): string {\n    return Frequency(NoteToMidi(note), \"midi\").toNote();\n}\n\nexport type NoteComparison = \"greater\" | \"equal\" | \"lesser\"\nexport function compareNotes(n: Note, m: Note): NoteComparison {\n    const x = NoteToMidi(n); const y = NoteToMidi(m);\n    return x < y ? \"lesser\" : x > y ? \"greater\" : \"equal\";\n}\n\nexport function offsetFromRoot(solfege: SolfegeClass): number {\n    return solfege == \"do\" ? 0\n        : solfege == \"ra\" ? 1\n        : solfege == \"re\" ? 2\n        : solfege == \"ri\" ? 3\n        : solfege == \"me\" ? 3\n        : solfege == \"mi\" ? 4\n        : solfege == \"fa\" ? 5\n        : solfege == \"fi\" ? 6\n        : solfege == \"se\" ? 6\n        : solfege == \"so\" ? 7\n        : solfege == \"si\" ? 8\n        : solfege == \"le\" ? 8\n        : solfege == \"la\" ? 9\n        : solfege == \"li\" ? 10\n        : solfege == \"te\" ? 10\n        : solfege == \"ti\" ? 11\n        : -1; \n}\n\nexport function toSolfege(solfege: string): SolfegeClass {\n    if (offsetFromRoot(solfege as SolfegeClass) == -1) {\n        console.log(\"Not valid solfege: \" + solfege);\n        throw new Error(\"Invalid solfege: \" + solfege);\n    } else {\n        return solfege as SolfegeClass;\n    }\n}\n\n// just for ascending chords\nexport function toOctaveSolfege(solfege: SolfegeClass[]): OctaveSolfegeRelative[] {\n    let maxOffsetSoFar = -1;\n    let octave = 0;\n    const result: OctaveSolfegeRelative[] = [];\n\n    solfege.forEach(note => {\n        const baseOffset = offsetFromRoot(note) ?? 0;\n        while (baseOffset + octave * 12 <= maxOffsetSoFar) {\n            octave++;\n        }\n        const withOctave = baseOffset + 12 * octave;\n        maxOffsetSoFar = withOctave;\n        result.push({solfege: note, octaveOffset: octave});\n    });\n    return result;\n}","import { MidiNote, Note, NoteToMidi, ScientificNote } from \"../models/notes\";\n\nexport type PlayedNote = {\n    velocity: number;\n    note: ScientificNote;\n    lifespan: number;\n}\n\nexport class MidiBatcher {\n    private _notes: PlayedNote[] = [];\n\n    constructor()\n    {\n    }\n\n    handleNoteOn(note: ScientificNote, velocity: number): void\n    {\n        this._notes.push({velocity: velocity, note: note, lifespan: 0});\n        this._notes.sort((a, b) => NoteToMidi(a.note) - NoteToMidi(b.note));\n    }\n\n    handleNoteOff(note: ScientificNote): void\n    {\n        this._notes = this._notes.filter(n => !(n.note.class == note.class && n.note.octave == note.octave));\n    }\n\n    // just make it public\n    getNotes(): PlayedNote[]\n    {\n        return this._notes;\n    }\n\n    tick(ms: number): void\n    {\n        this._notes.forEach(n => n.lifespan = n.lifespan + ms);\n    }\n}","import { PitchClass, NoteToMidi, midiNote } from \"../models/notes\";\nimport { MixBias, OvertoneConfig, CircleConfig } from \"../models/options\";\nimport { PlayedNote } from \"./midiBatcher\";\n\nexport type WeightedHSL = {\n    weight: number; // between [0, 1], in a list of  WeightedHSL, they sum to 1.\n    color: HSL;\n}\n\nexport type HSL = {\n    hue: number; // [0, 360], int\n    saturation: number; // [0, 100], float\n    light: number; // [0, 100], float\n}\n\nexport type RGB = {\n    red: number;\n    green: number;\n    blue: number;\n}\n\nexport type HexColor = string;\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   {number}  h       The hue\n * @param   {number}  s       The saturation\n * @param   {number}  l       The lightness\n * @return  {Array}           The RGB representation\n * \n * https://stackoverflow.com/a/9493060\n */\nexport function hslToRgb(hsl: HSL): RGB {\n    const h = hsl.hue / 360.0;\n    const l = hsl.light / 100.0;\n    const s = hsl.saturation / 100.0;\n\n    let r, g, b;\n\n    if(s == 0){\n        r = g = b = l; // achromatic\n    }else{\n        const hue2rgb = function hue2rgb(p: number, q: number, t: number){\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return {red: Math.round(r * 255), green: Math.round(g * 255), blue: Math.round(b * 255)};\n}\n\n// https://stackoverflow.com/a/44134328\nexport function hslToHex(hsl: HSL): HexColor {\n  const h = hsl.hue; const l = hsl.light / 100; const s = hsl.saturation;\n  const a = s * Math.min(l, 1 - l) / 100;\n  const f = (n: number) => {\n    const k = (n + h / 30) % 12;\n    const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n    return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix \"0\" if needed\n  };\n  return `#${f(0)}${f(8)}${f(4)}`;\n}\n\nconst fifths: Map<PitchClass, number> = new Map<PitchClass, number>(\n    [\n        [\"C\", 0],\n        [\"G\", 30],  \n        [\"D\", 60],  \n        [\"A\", 90],  \n        [\"E\", 120],  \n        [\"B\", 150],  \n        [\"F#\", 180],  \n        [\"Db\", 210],  \n        [\"Ab\", 240],  \n        [\"Eb\", 270],  \n        [\"Bb\", 300],  \n        [\"F\", 330]\n    ]\n);\n\n// lifespanFactor:  lifespan is ms, this is multiplied by ms to get percentage discount.\n// for -5% every second, do 0.05/1000\nexport function notesToColors(config: CircleConfig, notes: PlayedNote[]): HSL[] {\n    return notes.map(pn =>\n        {\n            // between 0, 100 -- a percentage\n            return {\n                hue: Math.abs((360 - fifths.get(pn.note.class)! + config.degreeOffset + fifths.get(config.tonic)!)) % 360,\n                saturation: 100 * (0.7 + 0.3 * pn.velocity), // todo: configurable saturation floor,\n                light: (NoteToMidi(pn.note) - 21) * (100 / 88.0)\n            };\n        });\n}\n\ntype Vector = {x: number; y: number; z: number}\nfunction hslToVector(hsl: HSL): Vector {\n    // https://stackoverflow.com/a/53328189\n    return {\n        x: Math.cos(hsl.hue / 180 * Math.PI) * hsl.saturation,\n        y: Math.sin(hsl.hue / 180 * Math.PI) * hsl.saturation,\n        z: hsl.light\n    };\n}\n\nfunction vectorToHsl(v: Vector): HSL {\n    const h = Math.atan2(v.y, v.x) * 180 / Math.PI;\n    return {\n        hue: h < 0 ? 360 + h : h,\n        saturation : Math.sqrt(v.x * v.x + v.y * v.y),\n        light: v.z\n    };\n}\n\nexport function mixColors(biases: MixBias, colors: HSL[]): HSL {\n    if (colors.length == 1)\n    {\n        return colors[0];\n    }\n    const middleCount = colors.length - 2;\n    const totalDivider = biases.rootBias + biases.melodyBias + middleCount;\n\n    // todo: also weight by velocity?\n    const v = { x: 0, y: 0, z: 0};\n    for (let i = 0; i < colors.length; i++)\n    {\n        const weight = i == 0 ? biases.rootBias\n            : i == colors.length - 1 ? biases.melodyBias\n            : 1;\n\n        const cv = hslToVector(colors[i]);\n        v.x += cv.x * weight;\n        v.y += cv.y * weight;\n        v.z += cv.z * weight;\n    }\n\n    v.x /= totalDivider;\n    v.y /= totalDivider;\n    v.z /= totalDivider;\n\n    return vectorToHsl(v);\n}\n\nexport function colorOvertones(color: HSL, config: OvertoneConfig): WeightedHSL[] {\n    const make = (h: number, l: number) => ({hue: h, light: l, saturation: color.saturation});\n    const lighten = (semitones: number) => Math.min(100, (100/88) * semitones + color.light);\n\n    let counter = 1;\n\n    const result: WeightedHSL[] = [{ color: color, weight: 1 } ];\n\n    const addOvertone = (c: HSL) => {\n        counter++;\n        const thisWeight = 1 / (config.backoffCoefficient * counter);\n        result.push({color: c, weight: thisWeight});\n    }\n\n    // addition and subtraction are opposites because we need to move counterclockwise\n    // around HSL. So, sharp: subtract; flat: add\n    if (config.numberOvertones >= 1)\n        addOvertone(make(color.hue, lighten(12)));\n    if (config.numberOvertones >= 2)\n        addOvertone(make(color.hue - 31, lighten(19))); // octave and a fifth that's 2cents sharp\n    if (config.numberOvertones >= 3) \n        addOvertone(make(color.hue, lighten(24)));\n    if (config.numberOvertones >= 4)\n        addOvertone(make((color.hue - 120 + 15 * 14/50) %  360, lighten(28))); // major third that's 14 cents flat\n    if (config.numberOvertones >= 5)\n        addOvertone(make(color.hue - 31, lighten(31)));\n    if (config.numberOvertones >= 6)\n        addOvertone(make((color.hue + 60 + 15 * 31/50) % 360, lighten(34))); // minor seventh 31 cents flat\n\n    normalizeWeights(result);\n\n    return result;\n}\n\nexport function normalizeWeights(weightedColors: WeightedHSL[]) {\n    const totalWeight = weightedColors.map(wc => wc.weight).reduce((x, y) => x + y, 0);\n    weightedColors.forEach(wc => wc.weight /= totalWeight);\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport OptionsEditor from \"./components/OptionsEditor.vue\";\nimport { VBtn, VContainer, VRow, VCol, VTabs, VApp, VMain, VTabItem, VTab } from \"vuetify/lib\";\n\nimport { Options, defaultOptions, CanvasOptions } from './domain/models/options';\nimport { Note, NoteToMidi, scientificNote, Octave, PitchClass, midiToScientific } from \"./domain/models/notes\";\nimport { MidiBatcher } from \"./domain/services/midiBatcher\";\nimport { HSL, RGB, notesToColors, hslToHex, mixColors, HexColor, colorOvertones, hslToRgb, normalizeWeights } from \"./domain/services/colorGiver\";\nimport { indexBy, deepMap, flipMap, drawRandom } from \"./domain/util/util\";\nimport webmidi, { WebMidi } from \"webmidi\";\n\n@Component ({\n  components: {\n    OptionsEditor,\n    VApp, VMain,\n    VTabs, VTab, VTabItem,\n    VContainer, VRow, VCol,\n    VBtn\n  }\n})\nexport default class App extends Vue {\n\n  private options: Options = defaultOptions;\n  private midiBatcher: MidiBatcher = new MidiBatcher();\n  // private randomPixelator: (rgbs: RGB[]) => void = (x) => {}\n  private ctx: (CanvasRenderingContext2D | undefined) = undefined;\n\n  get randomPixelator() {\n    return this.ctx == undefined\n      ? (_: RGB[]) => {} \n      : this.makeRandomPixelator(this.ctx, this.options.canvas);\n  }\n\n  get concentricPixelator() {\n    return this.ctx == undefined\n      ? (rgbs: RGB[][], emergent: RGB[], emergentBias: number) => {}\n      : this.makeConcentricPixelator(this.ctx, this.options.canvas);\n  }\n  // this.randomPixelator = this.makeRandomPixelator(ctx, this.options.canvas);\n\n  // this.concentricPixelator = this.makeConcentricPixelator(ctx, this.options.canvas);\n        \n\n  drawAll(ctx: CanvasRenderingContext2D, colors: HexColor[][], dimensions: CanvasOptions)\n  {\n    const height = dimensions.height;\n    const width = dimensions.width;\n\n    const rows = colors.length;\n    const rowSize = height / rows;\n    for (let r = 0; r < rows; r++)\n    {\n      const colorsInRow = colors[r];\n      const cols = colorsInRow.length;\n      const colSize = width / cols;\n\n      for (let c = 0; c < cols; c++)\n      {\n        const thisColor = colorsInRow[c];\n        ctx.beginPath();\n        ctx.fillStyle = thisColor;\n        ctx.rect(c * colSize, r * rowSize, colSize, rowSize);\n        ctx.fill();\n      }\n    }\n  }\n\n  // todo: regenerate instance on size change\n  makeRandomPixelator(ctx: CanvasRenderingContext2D, dimensions: CanvasOptions): ((rgbs: RGB[]) => void)\n  {\n    const width = dimensions.width;\n    const height = dimensions.height;\n\n    const arr = new Uint8ClampedArray(width * height * 4);\n    const imageData = new ImageData(arr, width);\n    return (rgbs: RGB[]) =>\n    {\n      for (let i = 0; i < arr.length; i+=4)\n      {\n        const c = rgbs[Math.floor(Math.random()*rgbs.length)];\n        arr[i] = c.red;\n        arr[i + 1] = c.green;\n        arr[i + 2] = c.blue;\n        arr[i + 3] = 255;\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n    }\n  }\n\n// todo: resize\n  makeConcentricPixelator(ctx: CanvasRenderingContext2D, dimensions: CanvasOptions)\n  {\n    const width = dimensions.width;\n    const height = dimensions.height;\n\n    const totalElements = width * height * 4;\n    const arr = new Uint8ClampedArray(width * height * 4);\n    const imageData = new ImageData(arr, width);\n    return (rgbs: RGB[][], emergent: RGB[], emergentBias: number) =>\n    {\n      for (let j = 0; j < rgbs.length; j++)\n      {\n        let end = (j + 1) * totalElements / rgbs.length -1;\n        end = end - (end % 4);\n        let begin = j * totalElements / rgbs.length;\n        begin = begin - (begin % 4);\n\n        const midpoint = (end + begin) / 2;\n        const d = (end - begin) / 2;\n        const thisRgbs = rgbs[rgbs.length - j - 1];\n\n        for (let i = begin; i < end; i+=4)\n        {\n          const c = Math.random() < (Math.abs(i - midpoint) / d) * emergentBias\n          ? emergent[Math.floor(Math.random()*emergent.length)]\n            : thisRgbs[Math.floor(Math.random()*thisRgbs.length)];\n          arr[i] = c.red;\n          arr[i + 1] = c.green;\n          arr[i + 2] = c.blue;\n          arr[i + 3] = 255;\n        }\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n    }\n  }\n\n  mounted()\n  {\n      const canvas = document.getElementById(\"canvas\") as HTMLCanvasElement;\n      const ctx = canvas.getContext(\"2d\")!;\n      this.ctx = ctx;\n\n      const renderSingleColor = () => {\n          const colors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n          if (colors.length == 0)\n          {\n            ctx?.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n          }\n          else\n          {\n            const color = mixColors(this.options.mix, colors);\n            ctx.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n            ctx.rect(0, 0, this.options.canvas.width, this.options.canvas.height);\n            ctx.fillStyle = hslToHex(color);\n            ctx.fill();\n          }\n          this.midiBatcher.tick(50);\n      };\n\n      const renderOvertonesGrid = () => {\n        const colors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (colors.length == 0)\n        {\n          ctx?.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n        }\n        else\n        {\n          const withOvertones = colors.map(c => colorOvertones(c, this.options.overtone).map(wc => wc.color));\n          console.log(withOvertones);\n          withOvertones.push(flipMap(withOvertones, c => mixColors(this.options.mix, c)));\n          const hexOvertones = deepMap(withOvertones, hslToHex);\n          this.drawAll(ctx, hexOvertones, this.options.canvas);\n        }\n      }\n\n      const pixelateRandomly = () => {\n        const rawColors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (rawColors.length == 0)\n        {\n          ctx?.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n        }\n        else\n        {\n          // first, weight with overtones, then weight with root/middle/etc. etc.?\n          const cs = [... rawColors];\n          if (cs.length > 1)\n            cs.push(mixColors(this.options.mix, cs));\n          const withOvertones = cs.map(c => colorOvertones(c, this.options.overtone));\n          for (let i = 0; i < withOvertones.length; i++)\n          {\n            if (i == 0)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.rootBias);\n            else if (i == withOvertones.length - 1)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.emergentBias);\n            else if (i == withOvertones.length - 2)\n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.melodyBias);\n            else \n              withOvertones[i].forEach(wc => wc.weight *= this.options.render.middleBias);\n          }\n          const flatColors = withOvertones.flat();\n          normalizeWeights(flatColors);\n          const drawingPool: RGB[] = [];\n          flatColors.forEach(wc => {\n            const rgb = hslToRgb(wc.color);\n            for (let i = 0; i < Math.floor(10000 * wc.weight); i++)\n              drawingPool.push(rgb);\n          })\n\n          this.randomPixelator(drawingPool);\n        }\n      }\n\n      const pixelateConcentrically = () => {\n        const rawColors = notesToColors(this.options.circle, this.midiBatcher.getNotes());\n        if (rawColors.length == 0)\n        {\n          ctx?.clearRect(0, 0, this.options.canvas.width, this.options.canvas.height);\n        }\n        else\n        {\n          // first, weight with overtones, then weight with root/middle/etc. etc.?\n          const cs = [... rawColors];\n          const withOvertones = cs.map(c => colorOvertones(c, this.options.overtone));\n          const emergent = colorOvertones(mixColors(this.options.mix, cs), this.options.overtone);\n\n          const drawingPool: RGB[][] = [];\n          withOvertones.forEach(wcs => {\n            const result: RGB[] = [];\n            wcs.forEach(wc => {\n              const rgb = hslToRgb(wc.color);\n              // todo: could write reusable function that looked at smallest weight and determined min number needed to have that represented once?\n              for (let i = 0; i < Math.floor(100 * wc.weight); i++)\n                result.push(rgb);\n            });\n            drawingPool.push(result);\n            }\n          );\n\n          const emergentDrawingPool: RGB[] = [];\n          emergent.forEach(wc => {\n            const rgb = hslToRgb(wc.color);\n            for (let i = 0; i < Math.floor(100 * wc.weight); i++)\n              emergentDrawingPool.push(rgb);\n          });\n\n          this.concentricPixelator(drawingPool, emergentDrawingPool, this.options.render.emergentBias);\n        }\n      }\n\n      const go = () => {\n        this.options.viewMode.single ? renderSingleColor()\n        : this.options.viewMode.overtoneGrid ? renderOvertonesGrid()\n        : this.options.viewMode.randomPixelation ? pixelateRandomly()\n        : pixelateConcentrically();\n      }\n\n      setInterval(go, 50);\n\n      webmidi.enable(ex => {\n        if (ex != undefined) {\n          console.log(\"Error trying to setup midi listener: \" + ex.name);\n        } else {\n          console.log(\"Successfully set up midi listner.\")\n        }\n    \n        console.log(webmidi.inputs);\n        console.log(webmidi.outputs);\n    \n        if (webmidi.inputs.length == 0) {\n          console.log(\"No midi input device detected.\");\n        }\n    \n        const input = webmidi.inputs[0];\n        input.addListener(\"noteon\", \"all\", e => {\n          this.midiBatcher.handleNoteOn(\n            midiToScientific(e.note.number, e.note.octave),\n            e.velocity\n          );\n          // render();\n        });\n    \n        input.addListener(\"noteoff\", \"all\", e => {\n          this.midiBatcher.handleNoteOff(\n            midiToScientific(e.note.number, e.note.octave)\n          );\n        });\n      }, true);\n  }\n}\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1902cab2&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport Vuetify from \"vuetify/lib\";\n\nimport 'vuetify/dist/vuetify.min.css';\n\nconst vuetify = new Vuetify({});\n\nVue.use(Vuetify);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount(\"#app\");"],"sourceRoot":""}